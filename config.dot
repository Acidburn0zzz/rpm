digraph AgentEnabled {
  node[color=green]
  "[agent_enabled]"
  "[developer_mode]"
  "[developer]"
  "[monitor_mode]"
  "[enabled]"
  "[slow_sql.explain_threshold]"
  "[slow_sql.stack_trace_threshold]"
  "[slow_sql.explain_enabled]"
  "[slow_sql.enabled]"
  "[slow_sql.record_sql]"
  "[transaction_tracer.limit_segments]"
  "[transaction_tracer.stack_trace_threshold]"
  "[transaction_tracer.explain_threshold]"
  "[transaction_tracer.explain_enabled]"
  "[transaction_tracer.transaction_threshold]"
  "[transaction_tracer.record_sql]"
  "[transaction_tracer.random_sample]"
  "[transaction_tracer.enabled]"
  "[license_key]"
  "[ssl]"
  "[verify_certificate]"
  "[api_host]"
  "[api_port]"
  "[proxy_host]"
  "[proxy_port]"
  "[proxy_user]"
  "[proxy_pass]"
  "[host]"
  "[port]"
  "[timeout]"

  node[color=red]
  "{agent_enabled}"
  "{developer_mode}"
  "{developer}"
  "{monitor_mode}"
  "{enabled}"
  "{monitor_daemons}"
  "{NEWRELIC_ENABLE}"
  "{force_send}"
  "{error_collector.enabled}"
  "{error_collector.capture_source}"
  "{error_collector.ignore_errors}"
  "{disable_mobile_headers}"
  "{collect_traces}"
  "{transaction_tracer.enabled}"
  "{transaction_tracer.enabled}"
  "{license_key}"
  "{capture_params}"
  "{browser_monitoring.auto_instrument}"
  "{multi_threaded}"
  "{disable_serialization}"
  "{textmate}"
  "{post_size_limit}"
  "{sync_startup}"
  "{send_data_on_exit}"
  "{log_level}"
  "{log_file_path}"
  "{log_file_name}"
  "{port}"
  "{high_security}"
  "{NEWRELIC_LICENSE_KEY}"
  "{apdex_t}"
  "{dispatcher_instance_id}"
  "{dispatcher}"
  "{app_name}"
  "{validate_seed}"
  "{NR_VALIDATE_SEED}"
  "{validate_token}"
  "{NR_VALIDATE_TOKEN}"
  "{disable_backtrace_cleanup}"
  "{slow_sql.enabled}"
  "{slow_sql.explain_enabled}"
  "{slow_sql.explain_threshold}"
  "{skip_ar_instrumentation}"
  "{disable_activerecord_instrumentation}"
  "{disable_dj}"
  "{capture_memcache_keys}"
  "{disable_memcache_instrumentation}"
  "{disable_view_instrumentation}"
  "{disable_resque}"
  "{multi_homed}"
  "{api_host}"
  "{NEW_RELIC_LOG}"
  "{slow_sql*}"
  "{error_collector*}"
  "{transaction_tracer*}"
  "{host}"
  "{api_port}"

  node[shape=box,color=orange]
  "Control#init_plugin"
  "Control#agent_enabled?"
  "Control#merge_defaults"
  "Control#developer_mode?"
  "Control#monitor_mode?"
  "Control#license_key"
  "Control#apdex_t"
  "Control#capture_params"
  "Control#browser_monitoring_auto_instrument?"
  "Control#multi_threaded?"
  "Control#disable_serialization?"
  "Control#use_textmate?"
  "Control#post_size_limit"
  "Control#sync_startup"
  "Control#send_data_on_exit"
  "Control#dispatcher_instance_id"
  "Control#dispatcher"
  "Control#app_names"
  "Control#validate_seed"
  "Control#validate_token"
  "Control#log_file_path"
  "Control#disable_backtrace_cleanup?"
  "Control#has_slow_sql_config?"
  "Control#settings"
  "Control#api_server"
  "Control#proxy_server"
  "Control#server_from_host"
  "Control#remove_server_controlled_configs"
  "Control#http_connection"
  "Control#set_log_level!"
  "Control#log_path"
  "Control#log_to_stdout?"
  "Control#convert_to_ip_address"
  "Control#server"
  "Control#merge_server_side_config"
  "Control#setup_log"
  "Control#log_file_name"
  "Control#should_log?"
  "Control#log!"
  "Control#env"
  "Control#profiling?"

  node[color=black]
  "LocalEnvironment#dispatcher_instance_id"
  "LocalEnvironment#dispatcher"
  "LocalEnvironment#gather_ar_adapter_info"
  "LocalEnvironment#gather_environment_info"

  "Agent#initialize"
  "Agent#after_fork"
  "Agent#disabled?"
  "Agent#shutdown"
  "Agent#has_license_key?"
  "Agent#correct_license_length"
  "Agent#apdex_f"
  "Agent#check_config_and_start_agent"
  "Agent#install_exit_handler"
  "Agent#log_app_names"
  "Agent#connect_settings"
  "Agent#log_seed_token"
  "Agent#log_error"
  "Agent#monitoring?"
  "Agent#check_trasaction_sampler_status"
  "Agent#check_sql_sampler_status"
  "Agent#config_transaction_tracer"
  "Agent#set_sql_recording!"
  "Agent#already_started?"
  "Agent#log_connection"
  "Agent#manual_start"

  "MethodTracer#remove_method_tracer"

  "ErrorCollector#initialize"
  "ErrorCollector#request_params_from_opts"

  "ControllerInstrumentation#perform_action_with_newrelic_trace"

  "NewRelicService#initialize"
  "NewRelicService#check_post_size"
  "NewRelicService#connect"
  "NewRelicService#send_request"

  "SqlSampler#configure!"
  "SqlSqmpler.config"

  "TransactionSampler#configure!"
  "TransactionSampler#notice_push_scope"
  "TransactionSampler#capture_segment_trace"
  "TransactionSampler#store_segment_for_developer_mode"

  "NoticeError#initialize"

  "BeaconConfiguration#license_bytes"

  "ActiveRecord#depends_on"
  "DelayedJobInstrumentation#depends_on"
  "Memcache#memcache_key_snippet"
  "Memcache#depends_on"
  "Rails::ActionController#depends_on"
  "Rails3::ActionController#depends_on"
  "Resque#depends_on"

  "DelayedJobSampler#initialize"
  "DelayedJobInjection#depends_on"

  "MetricFrame.update_apdex"

  "TranactionInfo#force_persist_sample?"
  "TranactionInfo#include_guid?"

  "TransactionSampleBuilder#initialize"
  "TransactionSampleBuilder#set_transaction_info"

  "Rails#install_browser_monitoring"
  "Rails#log!"
  "Rails3#log!"

  "CollectionHelper#strip_nr_from_backtrace"

  "Deployments#initialize"

#######

  "Control#init_plugin" -> "Control#agent_enabled?"
  "Control#init_plugin" -> "Control#settings"
  "Control#init_plugin" -> "Control#setup_log"
  "Control#init_plugin" -> "Control#env"
  "Control#merge_defaults" -> "{agent_enabled}"
  "Control#merge_defaults" -> "{monitor_daemons}"
  "Control#agent_enabled?" -> "{agent_enabled}"
  "Control#agent_enabled?" -> "Control#monitor_mode?"
  "Control#agent_enabled?" -> "Control#developer_mode?"
  "Control#agent_enabled?" -> "{monitor_daemons}"
  "Control#agent_enabled?" -> "{NEWRELIC_ENABLE}"
  "Control#agent_enabled?" -> "LocalEnvironment#dispatcher"
  "Control#developer_mode?" -> "{developer_mode}"
  "Control#developer_mode?" -> "{developer}"
  "Control#monitor_mode?" -> "{monitor_mode}"
  "Control#monitor_mode?" -> "{enabled}"
  "Control#should_log?" -> "Control#agent_enabled?" 
  "Control#license_key" -> "[license_key]"
  "Control#apdex_t" -> "{apdex_t}"
  "Control#capture_params" -> "{capture_params}"
  "Control#browser_monitoring_auto_instrument?" -> "{browser_monitoring.auto_instrument}"
  "Control#multi_threaded?" -> "{multi_threaded}"
  "Control#disable_serialization?" -> "{disable_serialization}"
  "Control#use_textmate?" -> "{textmate}"
  "Control#post_size_limit" -> "{post_size_limit}"
  "Control#sync_startup" -> "{sync_startup}"
  "Control#send_data_on_exit" -> "{send_data_on_exit}"
  "Control#dispatcher_instance_id" -> "{dispatcher_instance_id}"
  "Control#dispatcher_instance_id" -> "LocalEnvironment#dispatcher_instance_id"
  "Control#dispatcher" -> "{dispatcher}"
  "Control#dispatcher" -> "LocalEnvironment#dispatcher"
  "Control#app_names" -> "{app_name}"
  "Control#validate_seed" -> "{validate_seed}"
  "Control#validate_seed" -> "{NR_VALIDATE_SEED}"
  "Control#validate_token" -> "{validate_token}"
  "Control#validate_token" -> "{NR_VALIDATE_TOKEN}"
  "Control#log_file_path" -> "{log_file_path}"
  "Control#disable_backtrace_cleanup?" -> "{disable_backtrace_cleanup}"
  "Control#has_slow_sql_config?" -> "{slow_sql.enabled}"
  "Control#settings" -> "Control#merge_defaults"
  "Control#settings" -> "Control#app_names"
  "Control#settings" -> "LocalEnvironment#dispatcher_instance_id"
  "Control#settings" -> "{multi_homed}"
  "Control#api_server" -> "[api_host]"
  "Control#api_server" -> "[api_port]"
  "Control#proxy_server" -> "[proxy_host]"
  "Control#proxy_server" -> "[proxy_port]"
  "Control#proxy_server" -> "[proxy_user]"
  "Control#proxy_server" -> "[proxy_pass]"
  "Control#server_from_host" -> "[host]"
  "Control#server_from_host" -> "[port]"
  "Control#server_from_host" -> "Control#convert_to_ip_address"
  "Control#remove_server_controlled_configs" -> "{transaction_tracer*}"
  "Control#remove_server_controlled_configs" -> "{slow_sql*}"
  "Control#remove_server_controlled_configs" -> "{error_collector*}"
  "Control#remove_server_controlled_configs" -> "{capture_params}"
  "Control#remove_server_controlled_configs" -> "Control#settings"
  "Control#http_connection" -> "[ssl]"
  "Control#http_connection" -> "[verify_certificate]"
  "Control#http_connection" -> "Control#proxy_server"
  "Control#set_log_level!" -> "{log_level}"
  "Control#log_path" -> "{log_file_path}"
  "Control#log_path" -> "Control#log_to_stdout?"
  "Control#log_to_stdout?" -> "{NEW_RELIC_LOG}"
  "Control#log_to_stdout?" -> "{log_file_path}"
  "Control#convert_to_ip_address" -> "[ssl]"
  "Control#convert_to_ip_address" -> "[verify_certificate]"
  "Control#server" -> "Control#server_from_host"
  "Control#merge_server_side_config" -> "Control#remove_server_controlled_configs"
  "Control#setup_log" -> "Control#set_log_level!"
  "Control#setup_log" -> "Control#log_path"
  "Control#setup_log" -> "Control#log_to_stdout?"
  "Control#setup_log" -> "Control#log_file_name"
  "Control#log_file_name" -> "{log_file_name}"
  "Control#log_file_name" -> "{NEW_RELIC_LOG}"
  "Control#log!" -> "Control#should_log?"
  "Control#log!" -> "Control#log_path"

  "LocalEnvironment#gather_ar_adapter_info" -> "Control#env"
  "LocalEnvironment#gather_environment_info" -> "Control#env"

  "Agent#initialize" -> "Control#license_key"
  "Agent#initialize" -> "Control#server"
  "Agent#initialize" -> "[monitor_mode]"
  "Agent#after_fork" -> "Control#agent_enabled?"
  "Agent#after_fork" -> "[monitor_mode]"
  "Agent#disabled?" -> "Control#agent_enabled?"
  "Agent#shutdown" -> "{force_send}"
  "Agent#shutdown" -> "Control#dispatcher"
  "Agent#has_license_key?" -> "Control#license_key"
  "Agent#correct_license_length" -> "Control#license_key"
  "Agent#apdex_f" -> "Control#apdex_t"
  "Agent#check_config_and_start_agent" -> "Control#sync_startup"
  "Agent#install_exit_handler" -> "Control#sync_startup"
  "Agent#install_exit_handler" -> "Control#send_data_on_exit"
  "Agent#log_app_names" -> "Control#app_names"
  "Agent#connect_settings" -> "Control#app_names"
  "Agent#connect_settings" -> "Control#settings"
  "Agent#log_seed_token" -> "Control#validate_seed"
  "Agent#log_seed_token" -> "Control#validate_token"
  "Agent#validate_settings" -> "Control#validate_seed"
  "Agent#validate_settings" -> "Control#validate_token"
  "Agent#log_error" -> "Control#server"
  "Agent#finish_setup" -> "Control#merge_server_side_config"
  "Agent#monitoring?" -> "[monitor_mode]"
  "Agent#check_trasaction_sampler_status" -> "[developer_mode]"
  "Agent#check_sql_sampler_status" -> "[slow_sql.enabled]"
  "Agent#check_sql_sampler_status" -> "[slow_sql.record_sql]"
  "Agent#check_sql_sampler_status" -> "[transaction_tracer.enabled]"
  "Agent#config_transaction_tracer" -> "[transaction_tracer.enabled]"
  "Agent#config_transaction_tracer" -> "[transaction_tracer.random_sample]"
  "Agent#config_transaction_tracer" -> "[transaction_tracer.transaction_threshold]"
  "Agent#set_sql_recording!" -> "[transaction_tracer.record_sql]"
  "Agent#already_started?" -> "Control#log!"
  "Agent#log_connection" -> "Control#log!"
  "Agent#manual_start" -> "Control#init_plugin"

  "MethodTracer#remove_method_tracer" -> "Control#agent_enabled?"

  "Rails#init_config" -> "Control#agent_enabled?"
  "Rails#init_config" -> "Control#developer_mode?"

  "ErrorCollector#initialize" -> "{error_collector.enabled}"
  "ErrorCollector#initialize" -> "{error_collector.capture_source}"
  "ErrorCollector#initialize" -> "{error_collector.ignore_errors}"
  "ErrorCollector#request_params_from_opts" -> "Control#capture_params"

  "ControllerInstrumentation#perform_action_with_newrelic_trace" -> "{disable_mobile_headers}"
  "ControllerInstrumentation#perform_action_with_newrelic_trace" -> "Control#profiling?"

  "NewRelicService#initialize" -> "[timeout]"
  "NewRelicService#initialize" -> "Control#license_key"
  "NewRelicService#initialize" -> "Control#server"
  "NewRelicService#check_post_size" -> "Control#post_size_limit"
  "NewRelicService#connect" -> "Control#server_from_host"
  "NewRelicService#send_request" -> "Control#http_connection"

  "SqlSampler#configure!" -> "{collect_traces}"
  "SqlSampler#configure!" -> "[slow_sql.explain_threshold]"
  "SqlSampler#configure!" -> "[slow_sql.explain_enabled]"
  "SqlSampler#configure!" -> "[slow_sql.stack_trace_threshold]"
  "SqlSampler#configure!" -> "[slow_sql.enabled]"
  "SqlSqmpler.config" -> "{transaction_tracer.enabled}"
  "SqlSqmpler.config" -> "{slow_sql.enabled}"
  "SqlSqmpler.config" -> "Control#has_slow_sql_config?"

  "TransactionSampler#configure!" -> "[transaction_tracer.limit_segments]"
  "TransactionSampler#configure!" -> "[transaction_tracer.stack_trace_threshold]"
  "TransactionSampler#configure!" -> "[transaction_tracer.explain_threshold]"
  "TransactionSampler#configure!" -> "[transaction_tracer.explain_enabled]"
  "TransactionSampler#configure!" -> "[transaction_tracer.transaction_threshold]"
  "TransactionSampler#configure!" -> "[developer_mode]"
  "TransactionSampler#notice_push_scope" -> "[developer_mode]"
  "TransactionSampler#capture_segment_trace" -> "[developer_mode]"
  "TransactionSampler#store_segment_for_developer_mode" -> "[developer_mode]"

  "NoticeError#initialize" -> "{high_security}"

  "BeaconConfiguration#license_bytes" -> "Control#license_key"

  "ActiveRecord#depends_on" -> "{skip_ar_instrumentation}"
  "ActiveRecord#depends_on" -> "{disable_activerecord_instrumentation}"

  "DelayedJobInstrumentation#depends_on" -> "{disable_dj}"

  "Memcache#memcache_key_snippet" -> "{capture_memcache_keys}"
  "Memcache#depends_on" -> "{disable_memcache_instrumentation}"

  "Rails::ActionController#depends_on" -> "{disable_view_instrumentation}"
  "Rails3::ActionController#depends_on" -> "{disable_view_instrumentation}"
  "Resque#depends_on" -> "{disable_resque}"

  "DelayedJobSampler#initialize" -> "{disable_dj}"
  "DelayedJobInjection#depends_on" -> "{disable_dj}"
  "DelayedJobInjection#executes" -> "Control#init_plugin"

  "MetricFrame.update_apdex" -> "Control#apdex_t"

  "TranactionInfo#force_persist_sample?" -> "Control#apdex_t"
  "TranactionInfo#include_guid?" -> "Control#apdex_t"

  "TransactionSampleBuilder#initialize" -> "[transaction_tracer.limit_segments]"
  "TransactionSampleBuilder#set_transaction_info" -> "Control#capture_params"

  "Rails#install_browser_monitoring" -> "Control#browser_monitoring_auto_instrument?"
  "Rails#log!" -> "Control#should_log?"
  "Rails3#log!" -> "Control#should_log?"

  "CollectionHelper#strip_nr_from_backtrace" -> "Control#disable_backtrace_cleanup?"

  "Deployments#initialize" -> "Control#app_names"
  "Deployments#initialize" -> "Control#env"
  "Deployments#run" -> "Control#http_connection"
  "Deployments#run" -> "Control#env"
  "Deployments#run" -> "[license_key]"
  "Deployments#run" -> "Control#api_server"
}
