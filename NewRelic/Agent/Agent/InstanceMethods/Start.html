<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Module: NewRelic::Agent::Agent::InstanceMethods::Start</title>

<link type="text/css" media="screen" href="../../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../../../index.html">Home</a>
    <a href="../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/new_relic/agent/agent.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-already_started-3F">#already_started?</a>
    
    <li><a href="#method-i-check_config_and_start_agent">#check_config_and_start_agent</a>
    
    <li><a href="#method-i-connect_in_foreground">#connect_in_foreground</a>
    
    <li><a href="#method-i-correct_license_length">#correct_license_length</a>
    
    <li><a href="#method-i-disabled-3F">#disabled?</a>
    
    <li><a href="#method-i-has_correct_license_key-3F">#has_correct_license_key?</a>
    
    <li><a href="#method-i-has_license_key-3F">#has_license_key?</a>
    
    <li><a href="#method-i-install_exit_handler">#install_exit_handler</a>
    
    <li><a href="#method-i-log_app_names">#log_app_names</a>
    
    <li><a href="#method-i-log_dispatcher">#log_dispatcher</a>
    
    <li><a href="#method-i-log_if">#log_if</a>
    
    <li><a href="#method-i-log_unless">#log_unless</a>
    
    <li><a href="#method-i-log_version_and_pid">#log_version_and_pid</a>
    
    <li><a href="#method-i-monitoring-3F">#monitoring?</a>
    
    <li><a href="#method-i-notify_log_file_location">#notify_log_file_location</a>
    
    <li><a href="#method-i-using_forking_dispatcher-3F">#using_forking_dispatcher?</a>
    
    <li><a href="#method-i-using_sinatra-3F">#using_sinatra?</a>
    
    <li><a href="#method-i-weird_ruby-3F">#weird_ruby?</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../../../CHANGELOG.html">CHANGELOG</a>
  
    <li class="file"><a href="../../../../LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../../../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../../../NewRelic.html">NewRelic</a>
  
    <li><a href="../../../../NewRelic/Agent.html">NewRelic::Agent</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent.html">NewRelic::Agent::Agent</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent/ClassMethods.html">NewRelic::Agent::Agent::ClassMethods</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent/InstanceMethods.html">NewRelic::Agent::Agent::InstanceMethods</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent/InstanceMethods/Connect.html">NewRelic::Agent::Agent::InstanceMethods::Connect</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent/InstanceMethods/Start.html">NewRelic::Agent::Agent::InstanceMethods::Start</a>
  
    <li><a href="../../../../NewRelic/Agent/Agent/InstanceMethods/StartWorkerThread.html">NewRelic::Agent::Agent::InstanceMethods::StartWorkerThread</a>
  
    <li><a href="../../../../NewRelic/Agent/BackgroundLoadingError.html">NewRelic::Agent::BackgroundLoadingError</a>
  
    <li><a href="../../../../NewRelic/Agent/BeaconConfiguration.html">NewRelic::Agent::BeaconConfiguration</a>
  
    <li><a href="../../../../NewRelic/Agent/BrowserMonitoring.html">NewRelic::Agent::BrowserMonitoring</a>
  
    <li><a href="../../../../NewRelic/Agent/BrowserMonitoring/DummyMetricFrame.html">NewRelic::Agent::BrowserMonitoring::DummyMetricFrame</a>
  
    <li><a href="../../../../NewRelic/Agent/BusyCalculator.html">NewRelic::Agent::BusyCalculator</a>
  
    <li><a href="../../../../NewRelic/Agent/Database.html">NewRelic::Agent::Database</a>
  
    <li><a href="../../../../NewRelic/Agent/Database/ConnectionManager.html">NewRelic::Agent::Database::ConnectionManager</a>
  
    <li><a href="../../../../NewRelic/Agent/Database/Obfuscator.html">NewRelic::Agent::Database::Obfuscator</a>
  
    <li><a href="../../../../NewRelic/Agent/ErrorCollector.html">NewRelic::Agent::ErrorCollector</a>
  
    <li><a href="../../../../NewRelic/Agent/ErrorCollector/NoticeError.html">NewRelic::Agent::ErrorCollector::NoticeError</a>
  
    <li><a href="../../../../NewRelic/Agent/ForceDisconnectException.html">NewRelic::Agent::ForceDisconnectException</a>
  
    <li><a href="../../../../NewRelic/Agent/ForceRestartException.html">NewRelic::Agent::ForceRestartException</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation.html">NewRelic::Agent::Instrumentation</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/ActiveRecordInstrumentation.html">NewRelic::Agent::Instrumentation::ActiveRecordInstrumentation</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/ControllerInstrumentation.html">NewRelic::Agent::Instrumentation::ControllerInstrumentation</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/ControllerInstrumentation/ClassMethods.html">NewRelic::Agent::Instrumentation::ControllerInstrumentation::ClassMethods</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/DataMapperInstrumentation.html">NewRelic::Agent::Instrumentation::DataMapperInstrumentation</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Memcache.html">NewRelic::Agent::Instrumentation::Memcache</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/MetricFrame.html">NewRelic::Agent::Instrumentation::MetricFrame</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/MetricFrame/Pop.html">NewRelic::Agent::Instrumentation::MetricFrame::Pop</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/QueueTime.html">NewRelic::Agent::Instrumentation::QueueTime</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rack.html">NewRelic::Agent::Instrumentation::Rack</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rails3.html">NewRelic::Agent::Instrumentation::Rails3</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rails3/ActionController.html">NewRelic::Agent::Instrumentation::Rails3::ActionController</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rails3/ActionView.html">NewRelic::Agent::Instrumentation::Rails3::ActionView</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rails3/ActionView/PartialRenderer.html">NewRelic::Agent::Instrumentation::Rails3::ActionView::PartialRenderer</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Rails3/Errors.html">NewRelic::Agent::Instrumentation::Rails3::Errors</a>
  
    <li><a href="../../../../NewRelic/Agent/Instrumentation/Sinatra.html">NewRelic::Agent::Instrumentation::Sinatra</a>
  
    <li><a href="../../../../NewRelic/Agent/LicenseException.html">NewRelic::Agent::LicenseException</a>
  
    <li><a href="../../../../NewRelic/Agent/MethodTracer.html">NewRelic::Agent::MethodTracer</a>
  
    <li><a href="../../../../NewRelic/Agent/MethodTracer/ClassMethods.html">NewRelic::Agent::MethodTracer::ClassMethods</a>
  
    <li><a href="../../../../NewRelic/Agent/MethodTracer/ClassMethods/AddMethodTracer.html">NewRelic::Agent::MethodTracer::ClassMethods::AddMethodTracer</a>
  
    <li><a href="../../../../NewRelic/Agent/MethodTracer/InstanceMethods.html">NewRelic::Agent::MethodTracer::InstanceMethods</a>
  
    <li><a href="../../../../NewRelic/Agent/MethodTracer/InstanceMethods/TraceExecutionScoped.html">NewRelic::Agent::MethodTracer::InstanceMethods::TraceExecutionScoped</a>
  
    <li><a href="../../../../NewRelic/Agent/PostTooBigException.html">NewRelic::Agent::PostTooBigException</a>
  
    <li><a href="../../../../NewRelic/Agent/Sampler.html">NewRelic::Agent::Sampler</a>
  
    <li><a href="../../../../NewRelic/Agent/Sampler/Unsupported.html">NewRelic::Agent::Sampler::Unsupported</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers.html">NewRelic::Agent::Samplers</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/CpuSampler.html">NewRelic::Agent::Samplers::CpuSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/DelayedJobLockSampler.html">NewRelic::Agent::Samplers::DelayedJobLockSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/MemorySampler.html">NewRelic::Agent::Samplers::MemorySampler</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/MemorySampler/Base.html">NewRelic::Agent::Samplers::MemorySampler::Base</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/MemorySampler/JavaHeapSampler.html">NewRelic::Agent::Samplers::MemorySampler::JavaHeapSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/MemorySampler/ProcStatus.html">NewRelic::Agent::Samplers::MemorySampler::ProcStatus</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/MemorySampler/ShellPS.html">NewRelic::Agent::Samplers::MemorySampler::ShellPS</a>
  
    <li><a href="../../../../NewRelic/Agent/Samplers/ObjectSampler.html">NewRelic::Agent::Samplers::ObjectSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/ServerConnectionException.html">NewRelic::Agent::ServerConnectionException</a>
  
    <li><a href="../../../../NewRelic/Agent/ServerError.html">NewRelic::Agent::ServerError</a>
  
    <li><a href="../../../../NewRelic/Agent/ShimAgent.html">NewRelic::Agent::ShimAgent</a>
  
    <li><a href="../../../../NewRelic/Agent/SlowSql.html">NewRelic::Agent::SlowSql</a>
  
    <li><a href="../../../../NewRelic/Agent/SqlSampler.html">NewRelic::Agent::SqlSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/SqlTrace.html">NewRelic::Agent::SqlTrace</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine.html">NewRelic::Agent::StatsEngine</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/GCProfiler.html">NewRelic::Agent::StatsEngine::GCProfiler</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/GCProfiler/Profiler.html">NewRelic::Agent::StatsEngine::GCProfiler::Profiler</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/GCProfiler/RailsBench.html">NewRelic::Agent::StatsEngine::GCProfiler::RailsBench</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/GCProfiler/Rubinius.html">NewRelic::Agent::StatsEngine::GCProfiler::Rubinius</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/GCProfiler/Ruby19.html">NewRelic::Agent::StatsEngine::GCProfiler::Ruby19</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/MetricStats.html">NewRelic::Agent::StatsEngine::MetricStats</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/MetricStats/Harvest.html">NewRelic::Agent::StatsEngine::MetricStats::Harvest</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/MetricStats/SynchronizedHash.html">NewRelic::Agent::StatsEngine::MetricStats::SynchronizedHash</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/Samplers.html">NewRelic::Agent::StatsEngine::Samplers</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/ScopeStackElement.html">NewRelic::Agent::StatsEngine::ScopeStackElement</a>
  
    <li><a href="../../../../NewRelic/Agent/StatsEngine/Transactions.html">NewRelic::Agent::StatsEngine::Transactions</a>
  
    <li><a href="../../../../NewRelic/Agent/TransactionInfo.html">NewRelic::Agent::TransactionInfo</a>
  
    <li><a href="../../../../NewRelic/Agent/TransactionSampleBuilder.html">NewRelic::Agent::TransactionSampleBuilder</a>
  
    <li><a href="../../../../NewRelic/Agent/TransactionSampler.html">NewRelic::Agent::TransactionSampler</a>
  
    <li><a href="../../../../NewRelic/Agent/TransactionSqlData.html">NewRelic::Agent::TransactionSqlData</a>
  
    <li><a href="../../../../NewRelic/Agent/WorkerLoop.html">NewRelic::Agent::WorkerLoop</a>
  
    <li><a href="../../../../NewRelic/ApdexStats.html">NewRelic::ApdexStats</a>
  
    <li><a href="../../../../NewRelic/BasicStats.html">NewRelic::BasicStats</a>
  
    <li><a href="../../../../NewRelic/ChainedCall.html">NewRelic::ChainedCall</a>
  
    <li><a href="../../../../NewRelic/CollectionHelper.html">NewRelic::CollectionHelper</a>
  
    <li><a href="../../../../NewRelic/Command.html">NewRelic::Command</a>
  
    <li><a href="../../../../NewRelic/Command/CommandFailure.html">NewRelic::Command::CommandFailure</a>
  
    <li><a href="../../../../NewRelic/Command/Deployments.html">NewRelic::Command::Deployments</a>
  
    <li><a href="../../../../NewRelic/Command/Install.html">NewRelic::Command::Install</a>
  
    <li><a href="../../../../NewRelic/Control.html">NewRelic::Control</a>
  
    <li><a href="../../../../NewRelic/Control/ClassMethods.html">NewRelic::Control::ClassMethods</a>
  
    <li><a href="../../../../NewRelic/Control/Configuration.html">NewRelic::Control::Configuration</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks.html">NewRelic::Control::Frameworks</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/External.html">NewRelic::Control::Frameworks::External</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/Merb.html">NewRelic::Control::Frameworks::Merb</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/Rails.html">NewRelic::Control::Frameworks::Rails</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/Rails3.html">NewRelic::Control::Frameworks::Rails3</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/Ruby.html">NewRelic::Control::Frameworks::Ruby</a>
  
    <li><a href="../../../../NewRelic/Control/Frameworks/Sinatra.html">NewRelic::Control::Frameworks::Sinatra</a>
  
    <li><a href="../../../../NewRelic/Control/InstanceMethods.html">NewRelic::Control::InstanceMethods</a>
  
    <li><a href="../../../../NewRelic/Control/Instrumentation.html">NewRelic::Control::Instrumentation</a>
  
    <li><a href="../../../../NewRelic/Control/LoggingMethods.html">NewRelic::Control::LoggingMethods</a>
  
    <li><a href="../../../../NewRelic/Control/Profiling.html">NewRelic::Control::Profiling</a>
  
    <li><a href="../../../../NewRelic/Control/ServerMethods.html">NewRelic::Control::ServerMethods</a>
  
    <li><a href="../../../../NewRelic/DataSerialization.html">NewRelic::DataSerialization</a>
  
    <li><a href="../../../../NewRelic/DataSerialization/ClassMethods.html">NewRelic::DataSerialization::ClassMethods</a>
  
    <li><a href="../../../../NewRelic/DelayedJobInjection.html">NewRelic::DelayedJobInjection</a>
  
    <li><a href="../../../../NewRelic/Instrumentation.html">NewRelic::Instrumentation</a>
  
    <li><a href="../../../../NewRelic/Instrumentation/ActsAsSolrInstrumentation.html">NewRelic::Instrumentation::ActsAsSolrInstrumentation</a>
  
    <li><a href="../../../../NewRelic/Instrumentation/ActsAsSolrInstrumentation/ParserMethodsInstrumentation.html">NewRelic::Instrumentation::ActsAsSolrInstrumentation::ParserMethodsInstrumentation</a>
  
    <li><a href="../../../../NewRelic/LanguageSupport.html">NewRelic::LanguageSupport</a>
  
    <li><a href="../../../../NewRelic/LanguageSupport/Control.html">NewRelic::LanguageSupport::Control</a>
  
    <li><a href="../../../../NewRelic/LanguageSupport/DataSerialization.html">NewRelic::LanguageSupport::DataSerialization</a>
  
    <li><a href="../../../../NewRelic/LanguageSupport/SynchronizedHash.html">NewRelic::LanguageSupport::SynchronizedHash</a>
  
    <li><a href="../../../../NewRelic/LocalEnvironment.html">NewRelic::LocalEnvironment</a>
  
    <li><a href="../../../../NewRelic/MerbBootLoader.html">NewRelic::MerbBootLoader</a>
  
    <li><a href="../../../../NewRelic/MethodTraceStats.html">NewRelic::MethodTraceStats</a>
  
    <li><a href="../../../../NewRelic/MetricData.html">NewRelic::MetricData</a>
  
    <li><a href="../../../../NewRelic/MetricSpec.html">NewRelic::MetricSpec</a>
  
    <li><a href="../../../../NewRelic/Metrics.html">NewRelic::Metrics</a>
  
    <li><a href="../../../../NewRelic/NoticedError.html">NewRelic::NoticedError</a>
  
    <li><a href="../../../../NewRelic/Rack.html">NewRelic::Rack</a>
  
    <li><a href="../../../../NewRelic/Rack/BrowserMonitoring.html">NewRelic::Rack::BrowserMonitoring</a>
  
    <li><a href="../../../../NewRelic/Rack/DeveloperMode.html">NewRelic::Rack::DeveloperMode</a>
  
    <li><a href="../../../../NewRelic/Railtie.html">NewRelic::Railtie</a>
  
    <li><a href="../../../../NewRelic/ScopedMethodTraceStats.html">NewRelic::ScopedMethodTraceStats</a>
  
    <li><a href="../../../../NewRelic/Stats.html">NewRelic::Stats</a>
  
    <li><a href="../../../../NewRelic/StatsBase.html">NewRelic::StatsBase</a>
  
    <li><a href="../../../../NewRelic/TransactionAnalysis.html">NewRelic::TransactionAnalysis</a>
  
    <li><a href="../../../../NewRelic/TransactionAnalysis/SegmentSummary.html">NewRelic::TransactionAnalysis::SegmentSummary</a>
  
    <li><a href="../../../../NewRelic/TransactionSample.html">NewRelic::TransactionSample</a>
  
    <li><a href="../../../../NewRelic/TransactionSample/CompositeSegment.html">NewRelic::TransactionSample::CompositeSegment</a>
  
    <li><a href="../../../../NewRelic/TransactionSample/FakeSegment.html">NewRelic::TransactionSample::FakeSegment</a>
  
    <li><a href="../../../../NewRelic/TransactionSample/Segment.html">NewRelic::TransactionSample::Segment</a>
  
    <li><a href="../../../../NewRelic/TransactionSample/SummarySegment.html">NewRelic::TransactionSample::SummarySegment</a>
  
    <li><a href="../../../../NewRelic/UrlRule.html">NewRelic::UrlRule</a>
  
    <li><a href="../../../../NewRelic/UrlRule/RuleSet.html">NewRelic::UrlRule::RuleSet</a>
  
    <li><a href="../../../../NewRelic/VersionNumber.html">NewRelic::VersionNumber</a>
  
    <li><a href="../../../../ActionView.html">ActionView</a>
  
    <li><a href="../../../../ActionView/Base.html">ActionView::Base</a>
  
    <li><a href="../../../../ActionView/Partials.html">ActionView::Partials</a>
  
    <li><a href="../../../../ActionView/Partials/PartialRenderer.html">ActionView::Partials::PartialRenderer</a>
  
    <li><a href="../../../../ActionController.html">ActionController</a>
  
    <li><a href="../../../../ActionController/Base.html">ActionController::Base</a>
  
    <li><a href="../../../../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module NewRelic::Agent::Agent::InstanceMethods::Start</h1>

  <div id="description" class="description">
    
<p>Herein lies the corpse of the former ‘start’ method. May it’s
unmatched flog score rest in pieces.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-already_started-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">already_started?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Check whether we have already started, which is an error condition</p>
          

          
          <div class="method-source-code" id="already_started-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">already_started?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">started?</span>
    <span class="ruby-identifier">control</span>.<span class="ruby-identifier">log!</span>(<span class="ruby-string">&quot;Agent Started Already!&quot;</span>, <span class="ruby-value">:error</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- already_started-3F-source -->
          
        </div>

        

        
      </div><!-- already_started-3F-method -->

    
      <div id="method-i-check_config_and_start_agent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_config_and_start_agent</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Sanity-check the agent configuration and start the agent, setting up the
worker thread and the exit handler to shut down the agent</p>
          

          
          <div class="method-source-code" id="check_config_and_start_agent-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_config_and_start_agent</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">monitoring?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">has_correct_license_key?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">using_forking_dispatcher?</span>
  <span class="ruby-identifier">connect_in_foreground</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">control</span>.<span class="ruby-identifier">sync_startup</span>
  <span class="ruby-identifier">start_worker_thread</span>
  <span class="ruby-identifier">install_exit_handler</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- check_config_and_start_agent-source -->
          
        </div>

        

        
      </div><!-- check_config_and_start_agent-method -->

    
      <div id="method-i-connect_in_foreground" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">connect_in_foreground</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Connecting in the foreground blocks further startup of the agent until we
have a connection - useful in cases where you’re trying to log a
very-short-running process and want to get statistics from before a server
connection (typically 20 seconds) exists</p>
          

          
          <div class="method-source-code" id="connect_in_foreground-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 318</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">connect_in_foreground</span>
  <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Agent</span>.<span class="ruby-identifier">disable_all_tracing</span> { <span class="ruby-identifier">connect</span>(<span class="ruby-value">:keep_retrying</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>) }
<span class="ruby-keyword">end</span></pre>
          </div><!-- connect_in_foreground-source -->
          
        </div>

        

        
      </div><!-- connect_in_foreground-method -->

    
      <div id="method-i-correct_license_length" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">correct_license_length</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A license key is an arbitrary 40 character string, usually looks something
like a SHA1 hash</p>
          

          
          <div class="method-source-code" id="correct_license_length-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 398</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">correct_license_length</span>
  <span class="ruby-identifier">key</span> = <span class="ruby-identifier">control</span>.<span class="ruby-identifier">license_key</span>
  <span class="ruby-identifier">log_unless</span>((<span class="ruby-identifier">key</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">40</span>), <span class="ruby-value">:error</span>, <span class="ruby-node">&quot;Invalid license key: #{key}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- correct_license_length-source -->
          
        </div>

        

        
      </div><!-- correct_license_length-method -->

    
      <div id="method-i-disabled-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">disabled?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The agent is disabled when it is not force enabled by the
‘agent_enabled’ option (e.g. in a manual start), or enabled normally
through the configuration file</p>
          

          
          <div class="method-source-code" id="disabled-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">disabled?</span>
  <span class="ruby-operator">!</span><span class="ruby-identifier">control</span>.<span class="ruby-identifier">agent_enabled?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- disabled-3F-source -->
          
        </div>

        

        
      </div><!-- disabled-3F-method -->

    
      <div id="method-i-has_correct_license_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_correct_license_key?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A correct license key exists and is of the proper length</p>
          

          
          <div class="method-source-code" id="has_correct_license_key-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_correct_license_key?</span>
  <span class="ruby-identifier">has_license_key?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">correct_license_length</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- has_correct_license_key-3F-source -->
          
        </div>

        

        
      </div><!-- has_correct_license_key-3F-method -->

    
      <div id="method-i-has_license_key-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_license_key?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Tell the user when the license key is missing so they can fix it by adding
it to the file</p>
          

          
          <div class="method-source-code" id="has_license_key-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_license_key?</span>
  <span class="ruby-identifier">log_unless</span>(<span class="ruby-identifier">control</span>.<span class="ruby-identifier">license_key</span>, <span class="ruby-value">:error</span>, <span class="ruby-string">&quot;No license key found.  Please edit your newrelic.yml file and insert your license key.&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- has_license_key-3F-source -->
          
        </div>

        

        
      </div><!-- has_license_key-3F-method -->

    
      <div id="method-i-install_exit_handler" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_exit_handler</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Installs our exit handler, which exploits the weird behavior of at_exit
blocks to make sure it runs last, by doing an at_exit within an at_exit
block.</p>
          

          
          <div class="method-source-code" id="install_exit_handler-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_exit_handler</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">control</span>.<span class="ruby-identifier">send_data_on_exit</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">weird_ruby?</span>
    <span class="ruby-comment"># Our shutdown handler needs to run after other shutdown handlers</span>
    <span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">at_exit</span> { <span class="ruby-identifier">shutdown</span> } }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- install_exit_handler-source -->
          
        </div>

        

        
      </div><!-- install_exit_handler-method -->

    
      <div id="method-i-log_app_names" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">log_app_names</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Logs the configured application names</p>
          

          
          <div class="method-source-code" id="log_app_names-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">log_app_names</span>
  <span class="ruby-identifier">log</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;Application: #{control.app_names.join(&quot;, &quot;)}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- log_app_names-source -->
          
        </div>

        

        
      </div><!-- log_app_names-method -->

    
      <div id="method-i-log_dispatcher" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">log_dispatcher</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Logs the dispatcher to the log file to assist with debugging. When no
debugger is present, logs this fact to assist with proper dispatcher
detection</p>
          

          
          <div class="method-source-code" id="log_dispatcher-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">log_dispatcher</span>
  <span class="ruby-identifier">dispatcher_name</span> = <span class="ruby-identifier">control</span>.<span class="ruby-identifier">dispatcher</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">log_if</span>(<span class="ruby-identifier">dispatcher_name</span>.<span class="ruby-identifier">empty?</span>, <span class="ruby-value">:info</span>, <span class="ruby-string">&quot;No dispatcher detected.&quot;</span>)
  <span class="ruby-identifier">log</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;Dispatcher: #{dispatcher_name}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- log_dispatcher-source -->
          
        </div>

        

        
      </div><!-- log_dispatcher-method -->

    
      <div id="method-i-log_if" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">log_if</span><span
            class="method-args">(boolean, level, message)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A helper method that logs a condition if that condition is true. Mentally
cleaner than having every method set a local and log if it is true</p>
          

          
          <div class="method-source-code" id="log_if-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 366</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">log_if</span>(<span class="ruby-identifier">boolean</span>, <span class="ruby-identifier">level</span>, <span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">log</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">level</span>, <span class="ruby-identifier">message</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">boolean</span>
  <span class="ruby-identifier">boolean</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- log_if-source -->
          
        </div>

        

        
      </div><!-- log_if-method -->

    
      <div id="method-i-log_unless" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">log_unless</span><span
            class="method-args">(boolean, level, message)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A helper method that logs a condition unless that condition is true.
Mentally cleaner than having every method set a local and log unless it is
true</p>
          

          
          <div class="method-source-code" id="log_unless-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">log_unless</span>(<span class="ruby-identifier">boolean</span>, <span class="ruby-identifier">level</span>, <span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">log</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">level</span>, <span class="ruby-identifier">message</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">boolean</span>
  <span class="ruby-identifier">boolean</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- log_unless-source -->
          
        </div>

        

        
      </div><!-- log_unless-method -->

    
      <div id="method-i-log_version_and_pid" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">log_version_and_pid</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Classy logging of the agent version and the current pid, so we can
disambiguate processes in the log file and make sure they’re running a
reasonable version</p>
          

          
          <div class="method-source-code" id="log_version_and_pid-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 359</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">log_version_and_pid</span>
  <span class="ruby-identifier">log</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;New Relic Ruby Agent #{NewRelic::VERSION::STRING} Initialized: pid = #{$$}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- log_version_and_pid-source -->
          
        </div>

        

        
      </div><!-- log_version_and_pid-method -->

    
      <div id="method-i-monitoring-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">monitoring?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Warn the user if they have configured their agent not to send data, that
way we can see this clearly in the log file</p>
          

          
          <div class="method-source-code" id="monitoring-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 381</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">monitoring?</span>
  <span class="ruby-identifier">log_unless</span>(<span class="ruby-identifier">control</span>.<span class="ruby-identifier">monitor_mode?</span>, <span class="ruby-value">:warn</span>, <span class="ruby-string">&quot;Agent configured not to send data in this environment - edit newrelic.yml to change this&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- monitoring-3F-source -->
          
        </div>

        

        
      </div><!-- monitoring-3F-method -->

    
      <div id="method-i-notify_log_file_location" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">notify_log_file_location</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Tells us in the log file where the log file is located. This seems
redundant, but can come in handy when we have some log file path set by the
user which parses incorrectly, sending the log file to who-knows-where</p>
          

          
          <div class="method-source-code" id="notify_log_file_location-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">notify_log_file_location</span>
  <span class="ruby-identifier">log_file</span> = <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Control</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">log_file</span>
  <span class="ruby-identifier">log_if</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">log_file</span>.<span class="ruby-identifier">to_s</span>), <span class="ruby-value">:info</span>,
         <span class="ruby-node">&quot;Agent Log at #{log_file}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- notify_log_file_location-source -->
          
        </div>

        

        
      </div><!-- notify_log_file_location-method -->

    
      <div id="method-i-using_forking_dispatcher-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">using_forking_dispatcher?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>If we’re using a dispatcher that forks before serving requests, we need
to wait until the children are forked before connecting, otherwise the
parent process sends odd data</p>
          

          
          <div class="method-source-code" id="using_forking_dispatcher-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 406</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">using_forking_dispatcher?</span>
  <span class="ruby-identifier">log_if</span>([<span class="ruby-value">:passenger</span>, <span class="ruby-value">:unicorn</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">control</span>.<span class="ruby-identifier">dispatcher</span>), <span class="ruby-value">:info</span>, <span class="ruby-string">&quot;Connecting workers after forking.&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- using_forking_dispatcher-3F-source -->
          
        </div>

        

        
      </div><!-- using_forking_dispatcher-3F-method -->

    
      <div id="method-i-using_sinatra-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">using_sinatra?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>If we’re using sinatra, old versions run in an at_exit block so we should
probably know that</p>
          

          
          <div class="method-source-code" id="using_sinatra-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">using_sinatra?</span>
  <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- using_sinatra-3F-source -->
          
        </div>

        

        
      </div><!-- using_sinatra-3F-method -->

    
      <div id="method-i-weird_ruby-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">weird_ruby?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>we should not set an at_exit block if people are using these as they
don’t do standard at_exit behavior per MRI/YARV</p>
          

          
          <div class="method-source-code" id="weird_ruby-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/agent/agent.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">weird_ruby?</span>
  <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">LanguageSupport</span>.<span class="ruby-identifier">using_engine?</span>(<span class="ruby-string">'rbx'</span>) <span class="ruby-operator">||</span>
    <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">LanguageSupport</span>.<span class="ruby-identifier">using_engine?</span>(<span class="ruby-string">'jruby'</span>) <span class="ruby-operator">||</span>
    <span class="ruby-identifier">using_sinatra?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- weird_ruby-3F-source -->
          
        </div>

        

        
      </div><!-- weird_ruby-3F-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

