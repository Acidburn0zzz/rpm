<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>NewRelicApi</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            NewRelicApi 
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/lib/new_relic_api_rb.html">lib/new_relic_api.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h2>REST API Helpers</h2>
<p>
Ruby lib for working with the New Relic API&#8217;s XML interface. Requires
Rails 2.0 or later to be loaded.
</p>
<p>
Can also be used as a script using script/runner
</p>
<p>
Authentication is handled using your agent license key or HTTP Basic
Authentication. To authenticate using your license key your newrelic.yml
configuration file must be in your application config directory and contain
your license key. The New Relic account associated with the license key
must allow api access. Log into RPM, click <a
href="NewRelicApi/Account.html">Account</a> at the top of the page and
check the &#8220;Make my account data accessible&#8221; checkbox.
</p>
<p>
Basic authentication uses your site credentials to authenticate.
</p>
<pre>
  # To authenticate using basic authentication, make this call with your username and password:
  NewRelicApi.authenticate('user@example.com', 'test')
</pre>
<p>
This API does not have any agent dependencies. It can be used independent
of the agent by copying it into your application.
</p>
<h2>Examples</h2>
<pre>
  # Fetching the list of applications for an account
  NewRelicApi::Account.find(:first).applications

  # Fetching the health values for all account applications
  NewRelicApi::Account.application_health

  # Fetching the health values for an application
  NewRelicApi::Account.find(:first).applications.first.threshold_values

  # Finding an application by name
  NewRelicApi::Account.find(:first).applications(:params =&gt; {:conditions =&gt; {:name =&gt; 'My App'}})
</pre>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M001324">authenticate</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M001325">reset!</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    
    <div class="sectiontitle">Classes and Modules</div>
    <ul>
        
        <li><span class="type">MODULE</span> <a href="NewRelicApi/AccountResource.html">NewRelicApi::AccountResource</a></li>
        
        <li><span class="type">MODULE</span> <a href="NewRelicApi/ActiveResourceAssociations.html">NewRelicApi::ActiveResourceAssociations</a></li>
        
        <li><span class="type">MODULE</span> <a href="NewRelicApi/AgentResource.html">NewRelicApi::AgentResource</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/Account.html">NewRelicApi::Account</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/Application.html">NewRelicApi::Application</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/BaseResource.html">NewRelicApi::BaseResource</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/Deployment.html">NewRelicApi::Deployment</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/Subscription.html">NewRelicApi::Subscription</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/ThresholdValue.html">NewRelicApi::ThresholdValue</a></li>
        
        <li><span class="type">CLASS</span> <a href="NewRelicApi/User.html">NewRelicApi::User</a></li>
        
    </ul>
    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>email</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>password</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>license_key</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>ssl</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>host</td>
            <td class='attr-desc'></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [RW]
            </td>
            <td class='attr-name'>port</td>
            <td class='attr-desc'></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M001324">
                    
                    <a name="M001324"></a><b>authenticate</b>(email, password)
                    
                </div>
                
                <div class="description">
                  <p>
Sets up basic authentication credentials for all the resources. This is not
necessary if you are using agent license key authentication.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001324_source')" id="l_M001324_source">show</a>
                        
                    </p>
                    <div id="M001324_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic_api.rb, line 78</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authenticate</span>(<span class="ruby-identifier">email</span>, <span class="ruby-identifier">password</span>)
      <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">password</span>
      <span class="ruby-ivar">@email</span>    = <span class="ruby-identifier">email</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M001325">
                    
                    <a name="M001325"></a><b>reset!</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Resets the base path of all resources. This should be called when
overridding the newrelic.yml settings using the ssl, host or port
accessors.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M001325_source')" id="l_M001325_source">show</a>
                        
                    </p>
                    <div id="M001325_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic_api.rb, line 85</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset!</span>
      <span class="ruby-ivar">@classes</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">reset!</span>} <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@classes</span>
      <span class="ruby-constant">NewRelicApi</span><span class="ruby-operator">::</span><span class="ruby-constant">Account</span>.<span class="ruby-identifier">site_url</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    