<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>NewRelic::Command::Install</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Class</span> 
            NewRelic::Command::Install 
            
                <span class="parent">&lt; 
                    
                    <a href="../Command.html">NewRelic::Command</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/lib/new_relic/commands/install_rb.html">lib/new_relic/commands/install.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000972">command</a>,</li>
                
                <li><a href="#M000975">content</a></li>
                
            </ul>
        </dd>
    
        <dt>N</dt>
        <dd>
            <ul>
                
                <li><a href="#M000973">new</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000974">run</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    
    <div class="sectiontitle">Attributes</div>
    <table border='0' cellpadding='5'>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>dest_dir</td>
            <td class='attr-desc'><p>
Use -h to see options. When command_line_args is a hash, we are invoking
directly and it&#8217;s treated as an options with optional string values
for :user, :description, :appname, :revision, :environment, and :changes.
</p>
<p>
Will throw CommandFailed exception if there&#8217;s any error.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>license_key</td>
            <td class='attr-desc'><p>
Use -h to see options. When command_line_args is a hash, we are invoking
directly and it&#8217;s treated as an options with optional string values
for :user, :description, :appname, :revision, :environment, and :changes.
</p>
<p>
Will throw CommandFailed exception if there&#8217;s any error.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>generated_for_user</td>
            <td class='attr-desc'><p>
Use -h to see options. When command_line_args is a hash, we are invoking
directly and it&#8217;s treated as an options with optional string values
for :user, :description, :appname, :revision, :environment, and :changes.
</p>
<p>
Will throw CommandFailed exception if there&#8217;s any error.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>quiet</td>
            <td class='attr-desc'><p>
Use -h to see options. When command_line_args is a hash, we are invoking
directly and it&#8217;s treated as an options with optional string values
for :user, :description, :appname, :revision, :environment, and :changes.
</p>
<p>
Will throw CommandFailed exception if there&#8217;s any error.
</p></td>
        </tr>
        
        <tr valign='top'>
            <td class='attr-rw'>
                [R]
            </td>
            <td class='attr-name'>src_file</td>
            <td class='attr-desc'><p>
Use -h to see options. When command_line_args is a hash, we are invoking
directly and it&#8217;s treated as an options with optional string values
for :user, :description, :appname, :revision, :environment, and :changes.
</p>
<p>
Will throw CommandFailed exception if there&#8217;s any error.
</p></td>
        </tr>
        
    </table>
    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000972">
                    
                    <a name="M000972"></a><b>command</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000972_source')" id="l_M000972_source">show</a>
                        
                    </p>
                    <div id="M000972_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic/commands/install.rb, line 7</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">command</span>; <span class="ruby-value str">&quot;install&quot;</span>; <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000973">
                    
                    <a name="M000973"></a><b>new</b>(command_line_args={})
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000973_source')" id="l_M000973_source">show</a>
                        
                    </p>
                    <div id="M000973_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic/commands/install.rb, line 18</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">command_line_args</span>={}
    <span class="ruby-keyword kw">super</span> <span class="ruby-identifier">command_line_args</span>
    <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@dest_dir</span>
      <span class="ruby-comment cmt"># Install a newrelic.yml file into the local config directory.</span>
      <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-value str">&quot;config&quot;</span>
        <span class="ruby-ivar">@dest_dir</span> = <span class="ruby-value str">&quot;config&quot;</span>
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-ivar">@dest_dir</span> = <span class="ruby-value str">&quot;.&quot;</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-ivar">@license_key</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">'&lt;PASTE LICENSE KEY HERE&gt;'</span>
    <span class="ruby-ivar">@generated_for_user</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@user_string</span> <span class="ruby-operator">||</span> <span class="ruby-node">&quot;Generated on #{Time.now.strftime('%b %d, %Y')} from version #{NewRelic::VERSION::STRING}&quot;</span>
  <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000975">
                    
                    <a name="M000975"></a><b>content</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000975_source')" id="l_M000975_source">show</a>
                        
                    </p>
                    <div id="M000975_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic/commands/install.rb, line 57</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content</span>
    <span class="ruby-ivar">@src_file</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>),<span class="ruby-value str">&quot;..&quot;</span>,<span class="ruby-value str">&quot;..&quot;</span>,<span class="ruby-value str">&quot;..&quot;</span>,<span class="ruby-value str">&quot;newrelic.yml&quot;</span>)) 
    <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@src_file</span>)
    <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
  <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000974">
                    
                    <a name="M000974"></a><b>run</b>()
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000974_source')" id="l_M000974_source">show</a>
                        
                    </p>
                    <div id="M000974_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/new_relic/commands/install.rb, line 32</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run</span>
    <span class="ruby-identifier">dest_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-ivar">@dest_dir</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;/newrelic.yml&quot;</span>)
    <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">dest_file</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Command</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandFailure</span>, <span class="ruby-value str">&quot;newrelic.yml file already exists.  Move it out of the way.&quot;</span>
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dest_file</span>, <span class="ruby-value str">'w'</span>) { <span class="ruby-operator">|</span> <span class="ruby-identifier">out</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">out</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">content</span>) }
    
    <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;\nInstalled a default configuration file at\n\#{dest_file}.\n\nTo monitor your application in production mode, sign up for an account\nat www.newrelic.com, and replace the newrelic.yml file with the one\nyou receive upon registration.\n\nPlease review the README.md file for more information.\n\nE-mail support@newrelic.com with any problems or questions.\n\n&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">quiet</span>
    
  <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    