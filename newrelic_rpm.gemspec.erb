#-*- coding: utf-8 -*-
Gem::Specification.new do |s|
  s.name = "newrelic_rpm"
  s.version = "<%= version_string %>"
  s.required_rubygems_version = Gem::Requirement.new("> 1.3.1") if s.respond_to? :required_rubygems_version=
  s.authors = [ "Jason Clark", "Sam Goldstein", "Jon Guymon" ]
  s.date = "<%= date %>"
  s.description = <<-EOS
New Relic is a performance management system, developed by New Relic,
Inc (http://www.newrelic.com).  New Relic provides you with deep
information about the performance of your web application as it runs
in production. The New Relic Ruby Agent is dual-purposed as a either a
Gem or plugin, hosted on
http://github.com/newrelic/rpm/
EOS
  s.email = "support@newrelic.com"
  s.executables = [ "mongrel_rpm", "newrelic_cmd", "newrelic" ]
  s.extra_rdoc_files = [
    "CHANGELOG",
    "LICENSE",
    "README.rdoc",
    "newrelic.yml"
  ]
  s.files = [<% files.each do |file| %>
    "<%= file %>",<% end %>
  ]
  s.homepage = "http://www.github.com/newrelic/rpm"
  s.post_install_message = <<-EOS
PLEASE NOTE:

Developer Mode is now a Rack middleware.

Developer Mode is no longer available in Rails 2.1 and earlier.
However, starting in version 2.12 you can use Developer Mode in any
Rack based framework, in addition to Rails.  To install developer mode
in a non-Rails application, just add NewRelic::Rack::DeveloperMode to
your middleware stack.

If you are using JRuby, we recommend using at least version 1.4 or
later because of issues with the implementation of the timeout library.

Refer to the README.md file for more information.

Please see http://github.com/newrelic/rpm/blob/master/CHANGELOG
for a complete description of the features and enhancements available
in this version of the Ruby Agent.

EOS
  s.rdoc_options = ["--line-numbers", "--inline-source", "--title", "New Relic Ruby Agent"]
  s.require_paths = ["lib"]
  s.rubygems_version = "<%= gem_version %>"
  s.summary = "New Relic Ruby Agent"

  if s.respond_to? :specification_version
    s.specification_version = 3

    development_dependencies = {
      'rake'         => '>= 0.9.2.2',
      'mocha'        => '>= 0',
      'shoulda'      => '>= 0',
      'sdoc-helpers' => '>= 0',
      'rdoc'         => '>= 2.4.2',
      'rdiscount'    => '>= 0'
    }

    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new('1.2.0')
      development_dependencies.each do |k,v|
        s.add_development_dependency(k, [v])
      end
    else
      development_dependencies.each do |k,v|
        s.add_dependency(k, [v])
      end
    end
  else
    development_dependencies.each do |k,v|
      s.add_dependency(k, [v])
    end
  end
end
