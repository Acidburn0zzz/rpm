<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: NewRelic::Agent</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">NewRelic::Agent</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/new_relic/agent/agent_rb.html">
                lib/new_relic/agent/agent.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/error_collector_rb.html">
                lib/new_relic/agent/error_collector.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/instrumentation/rack_rb.html">
                lib/new_relic/agent/instrumentation/rack.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/method_tracer_rb.html">
                lib/new_relic/agent/method_tracer.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/stats_engine/metric_stats_rb.html">
                lib/new_relic/agent/stats_engine/metric_stats.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/stats_engine/samplers_rb.html">
                lib/new_relic/agent/stats_engine/samplers.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/stats_engine/transactions_rb.html">
                lib/new_relic/agent/stats_engine/transactions.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/stats_engine_rb.html">
                lib/new_relic/agent/stats_engine.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/transaction_sampler_rb.html">
                lib/new_relic/agent/transaction_sampler.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent/worker_loop_rb.html">
                lib/new_relic/agent/worker_loop.rb
                </a>
        <br />
                <a href="../../files/lib/new_relic/agent_rb.html">
                lib/new_relic/agent.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The main API module for the <a href="Agent.html">Agent</a>. Methods are
delegated to a singleton <a href="Agent.html">NewRelic::Agent::Agent</a> or
the Shim when the <a href="Agent.html#M000076">agent</a> is not enabled.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000090">add_custom_parameters</a>&nbsp;&nbsp;
      <a href="#M000091">add_request_parameters</a>&nbsp;&nbsp;
      <a href="#M000076">agent</a>&nbsp;&nbsp;
      <a href="#M000077">agent=</a>&nbsp;&nbsp;
      <a href="#M000086">disable_all_tracing</a>&nbsp;&nbsp;
      <a href="#M000084">disable_sql_recording</a>&nbsp;&nbsp;
      <a href="#M000085">disable_transaction_tracing</a>&nbsp;&nbsp;
      <a href="#M000079">get_stats</a>&nbsp;&nbsp;
      <a href="#M000080">get_stats_no_scope</a>&nbsp;&nbsp;
      <a href="#M000088">ignore_error_filter</a>&nbsp;&nbsp;
      <a href="#M000078">instance</a>&nbsp;&nbsp;
      <a href="#M000087">is_execution_traced?</a>&nbsp;&nbsp;
      <a href="#M000081">manual_start</a>&nbsp;&nbsp;
      <a href="#M000089">notice_error</a>&nbsp;&nbsp;
      <a href="#M000083">set_sql_obfuscator</a>&nbsp;&nbsp;
      <a href="#M000082">shutdown</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Agent/CollectionHelper.html" class="link">NewRelic::Agent::CollectionHelper</a><br />
Module <a href="Agent/Instrumentation.html" class="link">NewRelic::Agent::Instrumentation</a><br />
Module <a href="Agent/MethodTracer.html" class="link">NewRelic::Agent::MethodTracer</a><br />
Module <a href="Agent/Samplers.html" class="link">NewRelic::Agent::Samplers</a><br />
Class <a href="Agent/Agent.html" class="link">NewRelic::Agent::Agent</a><br />
Class <a href="Agent/BackgroundLoadingError.html" class="link">NewRelic::Agent::BackgroundLoadingError</a><br />
Class <a href="Agent/ErrorCollector.html" class="link">NewRelic::Agent::ErrorCollector</a><br />
Class <a href="Agent/ForceDisconnectException.html" class="link">NewRelic::Agent::ForceDisconnectException</a><br />
Class <a href="Agent/ForceRestartException.html" class="link">NewRelic::Agent::ForceRestartException</a><br />
Class <a href="Agent/IgnoreSilentlyException.html" class="link">NewRelic::Agent::IgnoreSilentlyException</a><br />
Class <a href="Agent/LicenseException.html" class="link">NewRelic::Agent::LicenseException</a><br />
Class <a href="Agent/PostTooBigException.html" class="link">NewRelic::Agent::PostTooBigException</a><br />
Class <a href="Agent/Sampler.html" class="link">NewRelic::Agent::Sampler</a><br />
Class <a href="Agent/ServerError.html" class="link">NewRelic::Agent::ServerError</a><br />
Class <a href="Agent/ShimAgent.html" class="link">NewRelic::Agent::ShimAgent</a><br />
Class <a href="Agent/StatsEngine.html" class="link">NewRelic::Agent::StatsEngine</a><br />
Class <a href="Agent/TransactionSampleBuilder.html" class="link">NewRelic::Agent::TransactionSampleBuilder</a><br />
Class <a href="Agent/TransactionSampler.html" class="link">NewRelic::Agent::TransactionSampler</a><br />
Class <a href="Agent/WorkerLoop.html" class="link">NewRelic::Agent::WorkerLoop</a><br />

    </div>




      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000090" class="method-detail">
        <a name="M000090"></a>

        <div class="method-heading">
          <a href="#M000090" class="method-signature">
          <span class="method-name">add_custom_parameters</span><span class="method-args">(params)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add parameters to the current transaction trace on the call stack.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000090-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000090-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 271</span>
271:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_custom_parameters</span>(<span class="ruby-identifier">params</span>)
272:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">add_custom_parameters</span>(<span class="ruby-identifier">params</span>)
273:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000091" class="method-detail">
        <a name="M000091"></a>

        <div class="method-heading">
          <span class="method-name">add_request_parameters</span><span class="method-args">(params)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Agent.html#M000090">add_custom_parameters</a>
</p>
        </div>
      </div>

      <div id="method-M000076" class="method-detail">
        <a name="M000076"></a>

        <div class="method-heading">
          <a href="#M000076" class="method-signature">
          <span class="method-name">agent</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The singleton <a href="Agent.html">Agent</a> <a
href="Agent.html#M000078">instance</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000076-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000076-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 131</span>
131:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">agent</span>
132:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Plugin not initialized!&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@agent</span>.<span class="ruby-identifier">nil?</span>
133:       <span class="ruby-ivar">@agent</span>
134:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000077" class="method-detail">
        <a name="M000077"></a>

        <div class="method-heading">
          <a href="#M000077" class="method-signature">
          <span class="method-name">agent=</span><span class="method-args">(new_instance)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000077-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000077-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 136</span>
136:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">agent=</span> <span class="ruby-identifier">new_instance</span>
137:       <span class="ruby-ivar">@agent</span> = <span class="ruby-identifier">new_instance</span>
138:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000086" class="method-detail">
        <a name="M000086"></a>

        <div class="method-heading">
          <a href="#M000086" class="method-signature">
          <span class="method-name">disable_all_tracing</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Yield to the block without collecting any metrics or traces in any of the
subsequent calls. If executed recursively, will keep track of the first
entry point and turn on tracing again after leaving that block. This uses
the thread local <tt>newrelic_untrace</tt>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000086-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000086-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 236</span>
236:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable_all_tracing</span>
237:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">push_trace_execution_flag</span>(<span class="ruby-keyword kw">false</span>)
238:       <span class="ruby-keyword kw">yield</span>
239:     <span class="ruby-keyword kw">ensure</span>
240:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">pop_trace_execution_flag</span>
241:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000084" class="method-detail">
        <a name="M000084"></a>

        <div class="method-heading">
          <a href="#M000084" class="method-signature">
          <span class="method-name">disable_sql_recording</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method sets the state of sql recording in the transaction sampler
feature. Within the given block, no sql will be recorded
</p>
<p>
usage:
</p>
<pre>
  NewRelic::Agent.disable_sql_recording do
    ...
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000084-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000084-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 212</span>
212:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable_sql_recording</span>
213:       <span class="ruby-identifier">state</span> = <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">set_record_sql</span>(<span class="ruby-keyword kw">false</span>)
214:       <span class="ruby-keyword kw">begin</span>
215:         <span class="ruby-keyword kw">yield</span>
216:       <span class="ruby-keyword kw">ensure</span>
217:         <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">set_record_sql</span>(<span class="ruby-identifier">state</span>)
218:       <span class="ruby-keyword kw">end</span>
219:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000085" class="method-detail">
        <a name="M000085"></a>

        <div class="method-heading">
          <a href="#M000085" class="method-signature">
          <span class="method-name">disable_transaction_tracing</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method disables the recording of transaction traces in the given
block. See also <a href="Agent.html#M000086">disable_all_tracing</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000085-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000085-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 223</span>
223:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable_transaction_tracing</span>
224:       <span class="ruby-identifier">state</span> = <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">set_record_tt</span>(<span class="ruby-keyword kw">false</span>)
225:       <span class="ruby-keyword kw">begin</span>
226:         <span class="ruby-keyword kw">yield</span>
227:       <span class="ruby-keyword kw">ensure</span>
228:         <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">set_record_tt</span>(<span class="ruby-identifier">state</span>)
229:       <span class="ruby-keyword kw">end</span>
230:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000079" class="method-detail">
        <a name="M000079"></a>

        <div class="method-heading">
          <a href="#M000079" class="method-signature">
          <span class="method-name">get_stats</span><span class="method-args">(metric_name, use_scope=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Get or create a statistics gatherer that will aggregate numerical data
under a metric name.
</p>
<p>
<tt>metric_name</tt> should follow a slash separated path convention.
Application specific metrics should begin with &quot;Custom/&quot;.
</p>
<p>
Return a <a href="Stats.html">NewRelic::Stats</a> that accepts data via
calls to add_data_point(value).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000079-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000079-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 150</span>
150:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_stats</span>(<span class="ruby-identifier">metric_name</span>, <span class="ruby-identifier">use_scope</span>=<span class="ruby-keyword kw">false</span>)
151:       <span class="ruby-ivar">@agent</span>.<span class="ruby-identifier">stats_engine</span>.<span class="ruby-identifier">get_stats</span>(<span class="ruby-identifier">metric_name</span>, <span class="ruby-identifier">use_scope</span>)
152:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000080" class="method-detail">
        <a name="M000080"></a>

        <div class="method-heading">
          <a href="#M000080" class="method-signature">
          <span class="method-name">get_stats_no_scope</span><span class="method-args">(metric_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000080-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000080-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 154</span>
154:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_stats_no_scope</span>(<span class="ruby-identifier">metric_name</span>)
155:       <span class="ruby-ivar">@agent</span>.<span class="ruby-identifier">stats_engine</span>.<span class="ruby-identifier">get_stats_no_scope</span>(<span class="ruby-identifier">metric_name</span>)
156:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000088" class="method-detail">
        <a name="M000088"></a>

        <div class="method-heading">
          <a href="#M000088" class="method-signature">
          <span class="method-name">ignore_error_filter</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set a filter to be applied to errors that RPM will track. The block should
return the exception to track (which could be different from the original
exception) or nil to ignore this exception.
</p>
<p>
The block is yielded to with the exception to filter.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000088-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000088-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 254</span>
254:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ignore_error_filter</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
255:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">error_collector</span>.<span class="ruby-identifier">ignore_error_filter</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
256:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000078" class="method-detail">
        <a name="M000078"></a>

        <div class="method-heading">
          <span class="method-name">instance</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Agent.html#M000076">agent</a>
</p>
        </div>
      </div>

      <div id="method-M000087" class="method-detail">
        <a name="M000087"></a>

        <div class="method-heading">
          <a href="#M000087" class="method-signature">
          <span class="method-name">is_execution_traced?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Check to see if we are capturing metrics currently on this thread.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000087-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000087-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 244</span>
244:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_execution_traced?</span>
245:       <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-identifier">:newrelic_untraced</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-identifier">:newrelic_untraced</span>].<span class="ruby-identifier">last</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">false</span>      
246:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000081" class="method-detail">
        <a name="M000081"></a>

        <div class="method-heading">
          <a href="#M000081" class="method-signature">
          <span class="method-name">manual_start</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Call this to manually start the <a href="Agent.html">Agent</a> in
situations where the <a href="Agent.html">Agent</a> does not auto-start.
</p>
<p>
When the app environment loads, so does the <a href="Agent.html">Agent</a>.
However, the <a href="Agent.html">Agent</a> will only connect to RPM if a
web front-end is found. If you want to selectively monitor ruby processes
that don&#8216;t use web plugins, then call this method in your code and
the <a href="Agent.html">Agent</a> will fire up and start reporting to RPM.
</p>
<p>
Options are passed in as overrides for values in the newrelic.yml, such as
app_name. In addition, the option <tt>log</tt> will take a logger that will
be used instead of the standard file logger. The setting for the
newrelic.yml section to use (ie, RAILS_ENV) can be overridden with an :env
argument.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000081-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000081-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 172</span>
172:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">manual_start</span>(<span class="ruby-identifier">options</span>={})
173:       <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">options</span>
174:       <span class="ruby-comment cmt"># Ignore all args but hash options</span>
175:       <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-identifier">:agent_enabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> 
176:       <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Control</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">init_plugin</span> <span class="ruby-identifier">options</span>
177:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000089" class="method-detail">
        <a name="M000089"></a>

        <div class="method-heading">
          <a href="#M000089" class="method-signature">
          <span class="method-name">notice_error</span><span class="method-args">(exception, extra_params = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Record the given error in RPM. It will be passed through the <a
href="Agent.html#M000088">ignore_error_filter</a> if there is one.
</p>
<ul>
<li><tt>exception</tt> is the exception which will be recorded

</li>
<li><tt>extra_params</tt> is a hash of name value pairs to appear alongside the
exception in RPM.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000089-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000089-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 265</span>
265:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">notice_error</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-identifier">extra_params</span> = {})
266:       <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Agent</span>.<span class="ruby-identifier">agent</span>.<span class="ruby-identifier">error_collector</span>.<span class="ruby-identifier">notice_error</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">extra_params</span>)
267:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000083" class="method-detail">
        <a name="M000083"></a>

        <div class="method-heading">
          <a href="#M000083" class="method-signature">
          <span class="method-name">set_sql_obfuscator</span><span class="method-args">(type = :replace, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method sets the block sent to this method as a sql obfuscator. The
block will be called with a single String SQL statement to obfuscate. The
method must return the obfuscated String SQL. If chaining of obfuscators is
required, use type = :before or :after
</p>
<p>
type = :before, :replace, :after
</p>
<p>
Example:
</p>
<pre>
   NewRelic::Agent.set_sql_obfuscator(:replace) do |sql|
      my_obfuscator(sql)
   end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000083-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000083-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 198</span>
198:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sql_obfuscator</span>(<span class="ruby-identifier">type</span> = <span class="ruby-identifier">:replace</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
199:       <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">set_sql_obfuscator</span> <span class="ruby-identifier">type</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
200:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000082" class="method-detail">
        <a name="M000082"></a>

        <div class="method-heading">
          <a href="#M000082" class="method-signature">
          <span class="method-name">shutdown</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Shutdown the <a href="Agent.html#M000076">agent</a>. Call this before
exiting. Sends any queued data and kills the background thread.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000082-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000082-source">
<pre>
     <span class="ruby-comment cmt"># File lib/new_relic/agent.rb, line 181</span>
181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shutdown</span>
182:       <span class="ruby-ivar">@agent</span>.<span class="ruby-identifier">shutdown</span>
183:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>