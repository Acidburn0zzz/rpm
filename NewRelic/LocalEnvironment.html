<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: NewRelic::LocalEnvironment</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/new_relic/local_environment.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../Object.html">Object</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-append_environment_value">#append_environment_value</a>
    
    <li><a href="#method-i-append_gem_list">#append_gem_list</a>
    
    <li><a href="#method-i-append_plugin_list">#append_plugin_list</a>
    
    <li><a href="#method-i-dispatcher_instance_id">#dispatcher_instance_id</a>
    
    <li><a href="#method-i-find_class_in_object_space">#find_class_in_object_space</a>
    
    <li><a href="#method-i-gather_ar_adapter_info">#gather_ar_adapter_info</a>
    
    <li><a href="#method-i-gather_architecture_info">#gather_architecture_info</a>
    
    <li><a href="#method-i-gather_cpu_info">#gather_cpu_info</a>
    
    <li><a href="#method-i-gather_db_info">#gather_db_info</a>
    
    <li><a href="#method-i-gather_dm_adapter_info">#gather_dm_adapter_info</a>
    
    <li><a href="#method-i-gather_environment_info">#gather_environment_info</a>
    
    <li><a href="#method-i-gather_jruby_info">#gather_jruby_info</a>
    
    <li><a href="#method-i-gather_os_info">#gather_os_info</a>
    
    <li><a href="#method-i-gather_revision_info">#gather_revision_info</a>
    
    <li><a href="#method-i-gather_ruby_info">#gather_ruby_info</a>
    
    <li><a href="#method-i-gather_system_info">#gather_system_info</a>
    
    <li><a href="#method-i-mongrel">#mongrel</a>
    
    <li><a href="#method-i-snapshot">#snapshot</a>
    
    <li><a href="#method-i-to_s">#to_s</a>
    
    <li><a href="#method-i-working_jruby-3F">#working_jruby?</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../CHANGELOG.html">CHANGELOG</a>
  
    <li class="file"><a href="../LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../NewRelic.html">NewRelic</a>
  
    <li><a href="../NewRelic/Agent.html">NewRelic::Agent</a>
  
    <li><a href="../NewRelic/Agent/Agent.html">NewRelic::Agent::Agent</a>
  
    <li><a href="../NewRelic/Agent/Agent/ClassMethods.html">NewRelic::Agent::Agent::ClassMethods</a>
  
    <li><a href="../NewRelic/Agent/Agent/InstanceMethods.html">NewRelic::Agent::Agent::InstanceMethods</a>
  
    <li><a href="../NewRelic/Agent/Agent/InstanceMethods/Connect.html">NewRelic::Agent::Agent::InstanceMethods::Connect</a>
  
    <li><a href="../NewRelic/Agent/Agent/InstanceMethods/Start.html">NewRelic::Agent::Agent::InstanceMethods::Start</a>
  
    <li><a href="../NewRelic/Agent/Agent/InstanceMethods/StartWorkerThread.html">NewRelic::Agent::Agent::InstanceMethods::StartWorkerThread</a>
  
    <li><a href="../NewRelic/Agent/BackgroundLoadingError.html">NewRelic::Agent::BackgroundLoadingError</a>
  
    <li><a href="../NewRelic/Agent/BeaconConfiguration.html">NewRelic::Agent::BeaconConfiguration</a>
  
    <li><a href="../NewRelic/Agent/BrowserMonitoring.html">NewRelic::Agent::BrowserMonitoring</a>
  
    <li><a href="../NewRelic/Agent/BrowserMonitoring/DummyMetricFrame.html">NewRelic::Agent::BrowserMonitoring::DummyMetricFrame</a>
  
    <li><a href="../NewRelic/Agent/BusyCalculator.html">NewRelic::Agent::BusyCalculator</a>
  
    <li><a href="../NewRelic/Agent/Database.html">NewRelic::Agent::Database</a>
  
    <li><a href="../NewRelic/Agent/Database/ConnectionManager.html">NewRelic::Agent::Database::ConnectionManager</a>
  
    <li><a href="../NewRelic/Agent/Database/Obfuscator.html">NewRelic::Agent::Database::Obfuscator</a>
  
    <li><a href="../NewRelic/Agent/ErrorCollector.html">NewRelic::Agent::ErrorCollector</a>
  
    <li><a href="../NewRelic/Agent/ErrorCollector/NoticeError.html">NewRelic::Agent::ErrorCollector::NoticeError</a>
  
    <li><a href="../NewRelic/Agent/ForceDisconnectException.html">NewRelic::Agent::ForceDisconnectException</a>
  
    <li><a href="../NewRelic/Agent/ForceRestartException.html">NewRelic::Agent::ForceRestartException</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation.html">NewRelic::Agent::Instrumentation</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/ActiveRecordInstrumentation.html">NewRelic::Agent::Instrumentation::ActiveRecordInstrumentation</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/ControllerInstrumentation.html">NewRelic::Agent::Instrumentation::ControllerInstrumentation</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/ControllerInstrumentation/ClassMethods.html">NewRelic::Agent::Instrumentation::ControllerInstrumentation::ClassMethods</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/DataMapperInstrumentation.html">NewRelic::Agent::Instrumentation::DataMapperInstrumentation</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Memcache.html">NewRelic::Agent::Instrumentation::Memcache</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/MetricFrame.html">NewRelic::Agent::Instrumentation::MetricFrame</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/MetricFrame/Pop.html">NewRelic::Agent::Instrumentation::MetricFrame::Pop</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/QueueTime.html">NewRelic::Agent::Instrumentation::QueueTime</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rack.html">NewRelic::Agent::Instrumentation::Rack</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rails3.html">NewRelic::Agent::Instrumentation::Rails3</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rails3/ActionController.html">NewRelic::Agent::Instrumentation::Rails3::ActionController</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rails3/ActionView.html">NewRelic::Agent::Instrumentation::Rails3::ActionView</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rails3/ActionView/PartialRenderer.html">NewRelic::Agent::Instrumentation::Rails3::ActionView::PartialRenderer</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Rails3/Errors.html">NewRelic::Agent::Instrumentation::Rails3::Errors</a>
  
    <li><a href="../NewRelic/Agent/Instrumentation/Sinatra.html">NewRelic::Agent::Instrumentation::Sinatra</a>
  
    <li><a href="../NewRelic/Agent/LicenseException.html">NewRelic::Agent::LicenseException</a>
  
    <li><a href="../NewRelic/Agent/MethodTracer.html">NewRelic::Agent::MethodTracer</a>
  
    <li><a href="../NewRelic/Agent/MethodTracer/ClassMethods.html">NewRelic::Agent::MethodTracer::ClassMethods</a>
  
    <li><a href="../NewRelic/Agent/MethodTracer/ClassMethods/AddMethodTracer.html">NewRelic::Agent::MethodTracer::ClassMethods::AddMethodTracer</a>
  
    <li><a href="../NewRelic/Agent/MethodTracer/InstanceMethods.html">NewRelic::Agent::MethodTracer::InstanceMethods</a>
  
    <li><a href="../NewRelic/Agent/MethodTracer/InstanceMethods/TraceExecutionScoped.html">NewRelic::Agent::MethodTracer::InstanceMethods::TraceExecutionScoped</a>
  
    <li><a href="../NewRelic/Agent/PostTooBigException.html">NewRelic::Agent::PostTooBigException</a>
  
    <li><a href="../NewRelic/Agent/Sampler.html">NewRelic::Agent::Sampler</a>
  
    <li><a href="../NewRelic/Agent/Sampler/Unsupported.html">NewRelic::Agent::Sampler::Unsupported</a>
  
    <li><a href="../NewRelic/Agent/Samplers.html">NewRelic::Agent::Samplers</a>
  
    <li><a href="../NewRelic/Agent/Samplers/CpuSampler.html">NewRelic::Agent::Samplers::CpuSampler</a>
  
    <li><a href="../NewRelic/Agent/Samplers/DelayedJobLockSampler.html">NewRelic::Agent::Samplers::DelayedJobLockSampler</a>
  
    <li><a href="../NewRelic/Agent/Samplers/MemorySampler.html">NewRelic::Agent::Samplers::MemorySampler</a>
  
    <li><a href="../NewRelic/Agent/Samplers/MemorySampler/Base.html">NewRelic::Agent::Samplers::MemorySampler::Base</a>
  
    <li><a href="../NewRelic/Agent/Samplers/MemorySampler/JavaHeapSampler.html">NewRelic::Agent::Samplers::MemorySampler::JavaHeapSampler</a>
  
    <li><a href="../NewRelic/Agent/Samplers/MemorySampler/ProcStatus.html">NewRelic::Agent::Samplers::MemorySampler::ProcStatus</a>
  
    <li><a href="../NewRelic/Agent/Samplers/MemorySampler/ShellPS.html">NewRelic::Agent::Samplers::MemorySampler::ShellPS</a>
  
    <li><a href="../NewRelic/Agent/Samplers/ObjectSampler.html">NewRelic::Agent::Samplers::ObjectSampler</a>
  
    <li><a href="../NewRelic/Agent/ServerConnectionException.html">NewRelic::Agent::ServerConnectionException</a>
  
    <li><a href="../NewRelic/Agent/ServerError.html">NewRelic::Agent::ServerError</a>
  
    <li><a href="../NewRelic/Agent/ShimAgent.html">NewRelic::Agent::ShimAgent</a>
  
    <li><a href="../NewRelic/Agent/SlowSql.html">NewRelic::Agent::SlowSql</a>
  
    <li><a href="../NewRelic/Agent/SqlSampler.html">NewRelic::Agent::SqlSampler</a>
  
    <li><a href="../NewRelic/Agent/SqlTrace.html">NewRelic::Agent::SqlTrace</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine.html">NewRelic::Agent::StatsEngine</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/GCProfiler.html">NewRelic::Agent::StatsEngine::GCProfiler</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/GCProfiler/Profiler.html">NewRelic::Agent::StatsEngine::GCProfiler::Profiler</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/GCProfiler/RailsBench.html">NewRelic::Agent::StatsEngine::GCProfiler::RailsBench</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/GCProfiler/Rubinius.html">NewRelic::Agent::StatsEngine::GCProfiler::Rubinius</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/GCProfiler/Ruby19.html">NewRelic::Agent::StatsEngine::GCProfiler::Ruby19</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/MetricStats.html">NewRelic::Agent::StatsEngine::MetricStats</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/MetricStats/Harvest.html">NewRelic::Agent::StatsEngine::MetricStats::Harvest</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/MetricStats/SynchronizedHash.html">NewRelic::Agent::StatsEngine::MetricStats::SynchronizedHash</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/Samplers.html">NewRelic::Agent::StatsEngine::Samplers</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/ScopeStackElement.html">NewRelic::Agent::StatsEngine::ScopeStackElement</a>
  
    <li><a href="../NewRelic/Agent/StatsEngine/Transactions.html">NewRelic::Agent::StatsEngine::Transactions</a>
  
    <li><a href="../NewRelic/Agent/TransactionInfo.html">NewRelic::Agent::TransactionInfo</a>
  
    <li><a href="../NewRelic/Agent/TransactionSampleBuilder.html">NewRelic::Agent::TransactionSampleBuilder</a>
  
    <li><a href="../NewRelic/Agent/TransactionSampler.html">NewRelic::Agent::TransactionSampler</a>
  
    <li><a href="../NewRelic/Agent/TransactionSqlData.html">NewRelic::Agent::TransactionSqlData</a>
  
    <li><a href="../NewRelic/Agent/WorkerLoop.html">NewRelic::Agent::WorkerLoop</a>
  
    <li><a href="../NewRelic/ApdexStats.html">NewRelic::ApdexStats</a>
  
    <li><a href="../NewRelic/BasicStats.html">NewRelic::BasicStats</a>
  
    <li><a href="../NewRelic/ChainedCall.html">NewRelic::ChainedCall</a>
  
    <li><a href="../NewRelic/CollectionHelper.html">NewRelic::CollectionHelper</a>
  
    <li><a href="../NewRelic/Command.html">NewRelic::Command</a>
  
    <li><a href="../NewRelic/Command/CommandFailure.html">NewRelic::Command::CommandFailure</a>
  
    <li><a href="../NewRelic/Command/Deployments.html">NewRelic::Command::Deployments</a>
  
    <li><a href="../NewRelic/Command/Install.html">NewRelic::Command::Install</a>
  
    <li><a href="../NewRelic/Control.html">NewRelic::Control</a>
  
    <li><a href="../NewRelic/Control/ClassMethods.html">NewRelic::Control::ClassMethods</a>
  
    <li><a href="../NewRelic/Control/Configuration.html">NewRelic::Control::Configuration</a>
  
    <li><a href="../NewRelic/Control/Frameworks.html">NewRelic::Control::Frameworks</a>
  
    <li><a href="../NewRelic/Control/Frameworks/External.html">NewRelic::Control::Frameworks::External</a>
  
    <li><a href="../NewRelic/Control/Frameworks/Merb.html">NewRelic::Control::Frameworks::Merb</a>
  
    <li><a href="../NewRelic/Control/Frameworks/Rails.html">NewRelic::Control::Frameworks::Rails</a>
  
    <li><a href="../NewRelic/Control/Frameworks/Rails3.html">NewRelic::Control::Frameworks::Rails3</a>
  
    <li><a href="../NewRelic/Control/Frameworks/Ruby.html">NewRelic::Control::Frameworks::Ruby</a>
  
    <li><a href="../NewRelic/Control/Frameworks/Sinatra.html">NewRelic::Control::Frameworks::Sinatra</a>
  
    <li><a href="../NewRelic/Control/InstanceMethods.html">NewRelic::Control::InstanceMethods</a>
  
    <li><a href="../NewRelic/Control/Instrumentation.html">NewRelic::Control::Instrumentation</a>
  
    <li><a href="../NewRelic/Control/LoggingMethods.html">NewRelic::Control::LoggingMethods</a>
  
    <li><a href="../NewRelic/Control/Profiling.html">NewRelic::Control::Profiling</a>
  
    <li><a href="../NewRelic/Control/ServerMethods.html">NewRelic::Control::ServerMethods</a>
  
    <li><a href="../NewRelic/DataSerialization.html">NewRelic::DataSerialization</a>
  
    <li><a href="../NewRelic/DataSerialization/ClassMethods.html">NewRelic::DataSerialization::ClassMethods</a>
  
    <li><a href="../NewRelic/DelayedJobInjection.html">NewRelic::DelayedJobInjection</a>
  
    <li><a href="../NewRelic/Instrumentation.html">NewRelic::Instrumentation</a>
  
    <li><a href="../NewRelic/Instrumentation/ActsAsSolrInstrumentation.html">NewRelic::Instrumentation::ActsAsSolrInstrumentation</a>
  
    <li><a href="../NewRelic/Instrumentation/ActsAsSolrInstrumentation/ParserMethodsInstrumentation.html">NewRelic::Instrumentation::ActsAsSolrInstrumentation::ParserMethodsInstrumentation</a>
  
    <li><a href="../NewRelic/LanguageSupport.html">NewRelic::LanguageSupport</a>
  
    <li><a href="../NewRelic/LanguageSupport/Control.html">NewRelic::LanguageSupport::Control</a>
  
    <li><a href="../NewRelic/LanguageSupport/DataSerialization.html">NewRelic::LanguageSupport::DataSerialization</a>
  
    <li><a href="../NewRelic/LanguageSupport/SynchronizedHash.html">NewRelic::LanguageSupport::SynchronizedHash</a>
  
    <li><a href="../NewRelic/LocalEnvironment.html">NewRelic::LocalEnvironment</a>
  
    <li><a href="../NewRelic/MerbBootLoader.html">NewRelic::MerbBootLoader</a>
  
    <li><a href="../NewRelic/MethodTraceStats.html">NewRelic::MethodTraceStats</a>
  
    <li><a href="../NewRelic/MetricData.html">NewRelic::MetricData</a>
  
    <li><a href="../NewRelic/MetricSpec.html">NewRelic::MetricSpec</a>
  
    <li><a href="../NewRelic/Metrics.html">NewRelic::Metrics</a>
  
    <li><a href="../NewRelic/NoticedError.html">NewRelic::NoticedError</a>
  
    <li><a href="../NewRelic/Rack.html">NewRelic::Rack</a>
  
    <li><a href="../NewRelic/Rack/BrowserMonitoring.html">NewRelic::Rack::BrowserMonitoring</a>
  
    <li><a href="../NewRelic/Rack/DeveloperMode.html">NewRelic::Rack::DeveloperMode</a>
  
    <li><a href="../NewRelic/Railtie.html">NewRelic::Railtie</a>
  
    <li><a href="../NewRelic/ScopedMethodTraceStats.html">NewRelic::ScopedMethodTraceStats</a>
  
    <li><a href="../NewRelic/Stats.html">NewRelic::Stats</a>
  
    <li><a href="../NewRelic/StatsBase.html">NewRelic::StatsBase</a>
  
    <li><a href="../NewRelic/TransactionAnalysis.html">NewRelic::TransactionAnalysis</a>
  
    <li><a href="../NewRelic/TransactionAnalysis/SegmentSummary.html">NewRelic::TransactionAnalysis::SegmentSummary</a>
  
    <li><a href="../NewRelic/TransactionSample.html">NewRelic::TransactionSample</a>
  
    <li><a href="../NewRelic/TransactionSample/CompositeSegment.html">NewRelic::TransactionSample::CompositeSegment</a>
  
    <li><a href="../NewRelic/TransactionSample/FakeSegment.html">NewRelic::TransactionSample::FakeSegment</a>
  
    <li><a href="../NewRelic/TransactionSample/Segment.html">NewRelic::TransactionSample::Segment</a>
  
    <li><a href="../NewRelic/TransactionSample/SummarySegment.html">NewRelic::TransactionSample::SummarySegment</a>
  
    <li><a href="../NewRelic/UrlRule.html">NewRelic::UrlRule</a>
  
    <li><a href="../NewRelic/UrlRule/RuleSet.html">NewRelic::UrlRule::RuleSet</a>
  
    <li><a href="../NewRelic/VersionNumber.html">NewRelic::VersionNumber</a>
  
    <li><a href="../ActionView.html">ActionView</a>
  
    <li><a href="../ActionView/Base.html">ActionView::Base</a>
  
    <li><a href="../ActionView/Partials.html">ActionView::Partials</a>
  
    <li><a href="../ActionView/Partials/PartialRenderer.html">ActionView::Partials::PartialRenderer</a>
  
    <li><a href="../ActionController.html">ActionController</a>
  
    <li><a href="../ActionController/Base.html">ActionController::Base</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class NewRelic::LocalEnvironment</h1>

  <div id="description" class="description">
    
<p>An instance of <a href="LocalEnvironment.html">LocalEnvironment</a> is
responsible for determining three things:</p>
<ul><li>
<p>Framework - :rails, :rails3, :merb, :ruby, :external, :test</p>
</li><li>
<p>Dispatcher - A supported dispatcher, or nil (:mongrel, :thin, :passenger,
:webrick, etc)</p>
</li><li>
<p>Dispatcher Instance ID, which distinguishes agents on a single host from
each other</p>
</li></ul>

<p>If the environment can’t be determined, it will be set to nil and <a
href="LocalEnvironment.html#method-i-dispatcher_instance_id">#dispatcher_instance_id</a>
will have nil.</p>

<p><a href="LocalEnvironment.html">NewRelic::LocalEnvironment</a> should be
accessed through <a
href="Control/InstanceMethods.html#attribute-i-env">NewRelic::Control::InstanceMethods#env</a>
(via the <a href="Control.html">NewRelic::Control</a> singleton).</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-dispatcher" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dispatcher</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>mongrel, thin, webrick, or possibly nil</p>
        
        </div>
      </div>
      
      <div id="attribute-i-dispatcher_instance_id" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dispatcher_instance_id</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p>used to distinguish instances of a dispatcher from each other, may be nil</p>
        
        </div>
      </div>
      
      <div id="attribute-i-environment" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">environment</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>mongrel, thin, webrick, or possibly nil</p>
        
        </div>
      </div>
      
      <div id="attribute-i-framework" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">framework</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>rails, rails3, merb, external, ruby, test, etc</p>
        
        </div>
      </div>
      
      <div id="attribute-i-processors" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">processors</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The number of cpus, if detected, or nil - many platforms do not support
this :(</p>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
  <span class="ruby-comment"># Extend self with any any submodules of LocalEnvironment.  These can override</span>
  <span class="ruby-comment"># the discover methods to discover new framworks and dispatchers.</span>
  <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">LocalEnvironment</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">const</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">mod</span> = <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">LocalEnvironment</span>.<span class="ruby-identifier">const_get</span> <span class="ruby-identifier">const</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extend</span> <span class="ruby-identifier">mod</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mod</span>.<span class="ruby-identifier">instance_of?</span> <span class="ruby-constant">Module</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">discover_framework</span>
  <span class="ruby-identifier">discover_dispatcher</span>
  <span class="ruby-ivar">@dispatcher</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher</span> <span class="ruby-operator">==</span> <span class="ruby-value">:none</span>
  <span class="ruby-ivar">@gems</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@plugins</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@config</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-append_environment_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append_environment_value</span><span
            class="method-args">(name, value = nil) { || ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Add the given key/value pair to the app environment settings.  Must pass
either a value or a block.  Block is called to get the value and any raised
errors are silently ignored.</p>
          

          
          <div class="method-source-code" id="append_environment_value-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-keyword">yield</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-ivar">@config</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>
  <span class="ruby-comment"># puts &quot;#{e}\n  #{e.backtrace.join(&quot;\n  &quot;)}&quot;</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@framework</span> <span class="ruby-operator">==</span> <span class="ruby-value">:test</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- append_environment_value-source -->
          
        </div>

        

        
      </div><!-- append_environment_value-method -->

    
      <div id="method-i-append_gem_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append_gem_list</span><span
            class="method-args">() { || ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>yields to the block and appends the returned value to the list of gems -
this catches errors that might be raised in the block</p>
          

          
          <div class="method-source-code" id="append_gem_list-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append_gem_list</span>
  <span class="ruby-ivar">@gems</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-comment"># puts &quot;#{e}\n  #{e.backtrace.join(&quot;\n  &quot;)}&quot;</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@framework</span> <span class="ruby-operator">==</span> <span class="ruby-value">:test</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- append_gem_list-source -->
          
        </div>

        

        
      </div><!-- append_gem_list-method -->

    
      <div id="method-i-append_plugin_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append_plugin_list</span><span
            class="method-args">() { || ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>yields to the block and appends the returned value to the list of plugins -
this catches errors that might be raised in the block</p>
          

          
          <div class="method-source-code" id="append_plugin_list-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append_plugin_list</span>
  <span class="ruby-ivar">@plugins</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>
  <span class="ruby-comment"># puts &quot;#{e}\n  #{e.backtrace.join(&quot;\n  &quot;)}&quot;</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@framework</span> <span class="ruby-operator">==</span> <span class="ruby-value">:test</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- append_plugin_list-source -->
          
        </div>

        

        
      </div><!-- append_plugin_list-method -->

    
      <div id="method-i-dispatcher_instance_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dispatcher_instance_id</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>An instance id pulled from either @<a
href="LocalEnvironment.html#method-i-dispatcher_instance_id">#dispatcher_instance_id</a>
or by splitting out the first part of the running file</p>
          

          
          <div class="method-source-code" id="dispatcher_instance_id-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dispatcher_instance_id</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher_instance_id</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@dispatcher_instance_id</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">$0</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;.&quot;</span>).<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@dispatcher_instance_id</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- dispatcher_instance_id-source -->
          
        </div>

        

        
      </div><!-- dispatcher_instance_id-method -->

    
      <div id="method-i-find_class_in_object_space" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_class_in_object_space</span><span
            class="method-args">(klass)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Runs through all the objects in ObjectSpace to find the first one that
match the provided class</p>
          

          
          <div class="method-source-code" id="find_class_in_object_space-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_class_in_object_space</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-constant">ObjectSpace</span>.<span class="ruby-identifier">each_object</span>(<span class="ruby-identifier">klass</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">x</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_class_in_object_space-source -->
          
        </div>

        

        
      </div><!-- find_class_in_object_space-method -->

    
      <div id="method-i-gather_ar_adapter_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_ar_adapter_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The name of the AR database adapter for the current environment and the
current schema version</p>
          

          
          <div class="method-source-code" id="gather_ar_adapter_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_ar_adapter_info</span>
  
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'Database adapter'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">ActiveRecord</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>) <span class="ruby-operator">&amp;&amp;</span>
        <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:configurations</span>)
      <span class="ruby-identifier">config</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Control</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">env</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">config</span>
        <span class="ruby-identifier">config</span>[<span class="ruby-string">'adapter'</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'Database schema version'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migrator</span>.<span class="ruby-identifier">current_version</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_ar_adapter_info-source -->
          
        </div>

        

        
      </div><!-- gather_ar_adapter_info-method -->

    
      <div id="method-i-gather_architecture_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_architecture_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Grabs the architecture string from either `uname -p` or the env variable
PROCESSOR_ARCHITECTURE</p>
          

          
          <div class="method-source-code" id="gather_architecture_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_architecture_info</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Arch'</span>) { <span class="ruby-value">`uname -p`</span> } <span class="ruby-operator">||</span>
    <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Arch'</span>) { <span class="ruby-constant">ENV</span>[<span class="ruby-string">'PROCESSOR_ARCHITECTURE'</span>] }
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_architecture_info-source -->
          
        </div>

        

        
      </div><!-- gather_architecture_info-method -->

    
      <div id="method-i-gather_cpu_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_cpu_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>See what the number of cpus is, works only on some linux variants</p>
          

          
          <div class="method-source-code" id="gather_cpu_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_cpu_info</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span> <span class="ruby-string">'/proc/cpuinfo'</span>
  <span class="ruby-ivar">@processors</span> = <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Processors'</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">processors</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-string">'/proc/cpuinfo'</span>).<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^processor\s*:/</span> }.<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Cannot determine the number of processors in /proc/cpuinfo&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">processors</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">processors</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_cpu_info-source -->
          
        </div>

        

        
      </div><!-- gather_cpu_info-method -->

    
      <div id="method-i-gather_db_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_db_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>sensing for which adapter is defined, then appends the relevant config
information</p>
          

          
          <div class="method-source-code" id="gather_db_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_db_info</span>
  <span class="ruby-comment"># room here for more database adapters, when.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-operator">::</span><span class="ruby-constant">ActiveRecord</span>
    <span class="ruby-identifier">gather_ar_adapter_info</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-operator">::</span><span class="ruby-constant">DataMapper</span>
    <span class="ruby-identifier">gather_dm_adapter_info</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_db_info-source -->
          
        </div>

        

        
      </div><!-- gather_db_info-method -->

    
      <div id="method-i-gather_dm_adapter_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_dm_adapter_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Datamapper version</p>
          

          
          <div class="method-source-code" id="gather_dm_adapter_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_dm_adapter_info</span>
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'DataMapper version'</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">'dm-core/version'</span>
    <span class="ruby-constant">DataMapper</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_dm_adapter_info-source -->
          
        </div>

        

        
      </div><!-- gather_dm_adapter_info-method -->

    
      <div id="method-i-gather_environment_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_environment_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Collect base statistics about the environment and record them for
comparison and change detection.</p>
          

          
          <div class="method-source-code" id="gather_environment_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_environment_info</span>
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'Framework'</span>, <span class="ruby-ivar">@framework</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'Dispatcher'</span>, <span class="ruby-ivar">@dispatcher</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher</span>
  <span class="ruby-identifier">append_environment_value</span> <span class="ruby-string">'Dispatcher instance id'</span>, <span class="ruby-ivar">@dispatcher_instance_id</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher_instance_id</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Environment'</span>) { <span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Control</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">env</span> }

  <span class="ruby-comment"># miscellaneous other helpful debugging information</span>
  <span class="ruby-identifier">gather_ruby_info</span>
  <span class="ruby-identifier">gather_system_info</span>
  <span class="ruby-identifier">gather_revision_info</span>
  <span class="ruby-identifier">gather_db_info</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_environment_info-source -->
          
        </div>

        

        
      </div><!-- gather_environment_info-method -->

    
      <div id="method-i-gather_jruby_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_jruby_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>like <a
href="LocalEnvironment.html#method-i-gather_ruby_info">#gather_ruby_info</a>
but for the special case of JRuby</p>
          

          
          <div class="method-source-code" id="gather_jruby_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_jruby_info</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'JRuby version'</span>) { <span class="ruby-constant">JRUBY_VERSION</span> }
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Java VM version'</span>) { <span class="ruby-constant">ENV_JAVA</span>[<span class="ruby-string">'java.vm.version'</span>]}
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_jruby_info-source -->
          
        </div>

        

        
      </div><!-- gather_jruby_info-method -->

    
      <div id="method-i-gather_os_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_os_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>gathers OS info from either `uname -v`, `uname -s`, or the OS env variable</p>
          

          
          <div class="method-source-code" id="gather_os_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_os_info</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'OS version'</span>) { <span class="ruby-value">`uname -v`</span> }
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'OS'</span>) { <span class="ruby-value">`uname -s`</span> } <span class="ruby-operator">||</span>
    <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'OS'</span>) { <span class="ruby-constant">ENV</span>[<span class="ruby-string">'OS'</span>] }
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_os_info-source -->
          
        </div>

        

        
      </div><!-- gather_os_info-method -->

    
      <div id="method-i-gather_revision_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_revision_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Looks for a capistrano file indicating the current revision</p>
          

          
          <div class="method-source-code" id="gather_revision_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_revision_info</span>
  <span class="ruby-identifier">rev_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">NewRelic</span><span class="ruby-operator">::</span><span class="ruby-constant">Control</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">root</span>, <span class="ruby-string">&quot;REVISION&quot;</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">readable?</span>(<span class="ruby-identifier">rev_file</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">rev_file</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-value">64</span>
    <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Revision'</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">rev_file</span>) { <span class="ruby-operator">|</span> <span class="ruby-identifier">file</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">readline</span>.<span class="ruby-identifier">strip</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_revision_info-source -->
          
        </div>

        

        
      </div><!-- gather_revision_info-method -->

    
      <div id="method-i-gather_ruby_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_ruby_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Interrogates some common ruby constants for useful information about what
kind of ruby environment the agent is running in</p>
          

          
          <div class="method-source-code" id="gather_ruby_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_ruby_info</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Ruby version'</span>){ <span class="ruby-constant">RUBY_VERSION</span> }
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Ruby description'</span>){ <span class="ruby-constant">RUBY_DESCRIPTION</span> } <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-operator">::</span><span class="ruby-constant">RUBY_DESCRIPTION</span>
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Ruby platform'</span>) { <span class="ruby-constant">RUBY_PLATFORM</span> }
  <span class="ruby-identifier">append_environment_value</span>(<span class="ruby-string">'Ruby patchlevel'</span>) { <span class="ruby-constant">RUBY_PATCHLEVEL</span> }
  <span class="ruby-comment"># room here for other ruby implementations, when.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-operator">::</span><span class="ruby-constant">JRUBY_VERSION</span>
    <span class="ruby-identifier">gather_jruby_info</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_ruby_info-source -->
          
        </div>

        

        
      </div><!-- gather_ruby_info-method -->

    
      <div id="method-i-gather_system_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_system_info</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Gathers the architecture and cpu info</p>
          

          
          <div class="method-source-code" id="gather_system_info-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gather_system_info</span>
  <span class="ruby-identifier">gather_architecture_info</span>
  <span class="ruby-identifier">gather_cpu_info</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gather_system_info-source -->
          
        </div>

        

        
      </div><!-- gather_system_info-method -->

    
      <div id="method-i-mongrel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">mongrel</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Sets the @mongrel instance variable if we can find a Mongrel::HttpServer</p>
          

          
          <div class="method-source-code" id="mongrel-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 224</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mongrel</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@mongrel</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mongrel</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Mongrel</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Mongrel</span><span class="ruby-operator">::</span><span class="ruby-constant">HttpServer</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">working_jruby?</span>
    <span class="ruby-ivar">@mongrel</span> = <span class="ruby-identifier">find_class_in_object_space</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Mongrel</span><span class="ruby-operator">::</span><span class="ruby-constant">HttpServer</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@mongrel</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- mongrel-source -->
          
        </div>

        

        
      </div><!-- mongrel-method -->

    
      <div id="method-i-snapshot" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">snapshot</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Take a snapshot of the environment information for this application Returns
an associative array</p>
          

          
          <div class="method-source-code" id="snapshot-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">snapshot</span>
  <span class="ruby-identifier">i</span> = <span class="ruby-ivar">@config</span>.<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-string">'Plugin List'</span>, <span class="ruby-ivar">@plugins</span>.<span class="ruby-identifier">to_a</span>] <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@plugins</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">i</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-string">'Gems'</span>, <span class="ruby-ivar">@gems</span>.<span class="ruby-identifier">to_a</span>] <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@gems</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">i</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- snapshot-source -->
          
        </div>

        

        
      </div><!-- snapshot-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>outputs a human-readable description</p>
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 405</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">s</span> = <span class="ruby-string">&quot;LocalEnvironment[&quot;</span>
  <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@framework</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;;dispatcher=#{@dispatcher}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher</span>
  <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;;instance=#{@dispatcher_instance_id}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dispatcher_instance_id</span>
  <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;]&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
      <div id="method-i-working_jruby-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">working_jruby?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>it’s a working jruby if it has the runtime method, and object space is
enabled</p>
          

          
          <div class="method-source-code" id="working_jruby-3F-source">
            <pre><span class="ruby-comment"># File lib/new_relic/local_environment.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">working_jruby?</span>
  <span class="ruby-operator">!</span>(<span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">JRuby</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">JRuby</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:runtime</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">JRuby</span>.<span class="ruby-identifier">runtime</span>.<span class="ruby-identifier">is_object_space_enabled</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- working_jruby-3F-source -->
          
        </div>

        

        
      </div><!-- working_jruby-3F-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

